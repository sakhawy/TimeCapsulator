(this.webpackJsonpcapsulator=this.webpackJsonpcapsulator||[]).push([[0],{48:function(e,t,c){},49:function(e,t,c){},79:function(e,t,c){"use strict";c.r(t);var r=c(1),s=c(24),n=c.n(s),a=(c(48),c(49),c(19)),l=c(5),i=c(2),o=c(7),u=c(9),d=c(0);var x,f=function(){var e=Object(l.g)();return Object(d.jsxs)("div",{className:"flex flex-col space-y-6",children:[Object(d.jsxs)("div",{className:"flex flex-col justify-center items-center bg-secondary rounded-b-2xl p-4",children:[Object(d.jsx)("div",{className:"flex justify-center items-center felx-grow",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-primary",children:"Time Capsulator"})}),Object(d.jsx)("div",{className:"flex justify-center items-center felx-grow",children:Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-bold md:text-xl text-center ",children:"You're taking a sip from your favourite drink on a beautiful weekend evening. While swiming in an ocean of thoughts, you remember a precious memory from a few years ago, and... you just smile and continue with your beautiful evening. That's what Time Capsulator is all about. You put some precious memories here to be reminded of them once they're forgotten!"})})]}),Object(d.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(d.jsx)("div",{className:"flex justify-center items-center flex-grow mb-4",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-secondary ",children:"Key Features"})}),Object(d.jsx)("div",{className:"w-full flex-grow",children:Object(d.jsx)("div",{className:"bg-secondary  p-2 rounded-2xl flex justify-start items-center mr-8 md:mr-32 lg:mr-48 mb-4",children:Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-bold md:text-xl text-center",children:"Sending images and messages to your future self."})})}),Object(d.jsx)("div",{className:"w-full flex-grow",children:Object(d.jsx)("div",{className:"bg-secondary  p-2 rounded-2xl flex justify-start items-center ml-4 md:ml-16 lg:ml-24 mb-4 mr-4 md:mr-16 lg:mr-24 text-center",children:Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-bold md:text-xl",children:"Getting an email when the capsule is open."})})}),Object(d.jsx)("div",{className:"w-full flex-grow",children:Object(d.jsx)("div",{className:"bg-secondary  p-2 rounded-2xl flex justify-start items-center ml-8 md:ml-32 lg:ml-48 mb-4 text-center",children:Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-bold md:text-xl",children:"Making a shared Time Capsule with firends."})})}),Object(d.jsx)("div",{className:"w-full flex-grow",children:Object(d.jsx)("div",{className:"bg-secondary  p-2 rounded-2xl flex justify-start items-center ml-4 md:ml-16 lg:ml-24 mb-4 mr-4 md:mr-16 lg:mr-24 text-center",children:Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-bold md:text-xl",children:"Hiding stuff from firends till the capsule is opened."})})}),Object(d.jsx)("div",{className:"w-full flex-grow",children:Object(d.jsx)("div",{className:"bg-secondary  p-2 rounded-2xl flex justify-start items-center mr-8 md:mr-32 lg:mr-48 text-center",children:Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-bold md:text-xl",children:"Making time capsules public or private."})})})]}),Object(d.jsxs)("div",{className:"bg-secondary flex flex-col items-center justify-center rounded-2xl space-y-2 p-4",children:[Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-primary ",children:"How To Start"})}),Object(d.jsx)("button",{className:"rounded-md bg-primary text-secondary w-40 md:w-80 h-16 flex-grow font-bold text-2xl",onClick:function(){e.push("/auth")},children:Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-2",children:[Object(d.jsx)(u.a,{icon:o.t}),Object(d.jsx)("p",{children:"Sign Up"})]})}),Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center",children:Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-bold md:text-xl text-center",children:"Create an account and enjoy the app right away!"})})]})]})},j=c(4),b=c(12),m=c.n(b),p=c(3),h=c(8),O=c.n(h),g=c(13),y=c(10),v=c(41),w=c.n(v).a.create({baseURL:"http://localhost:8000"}),N={auth:"/api/authenticate/",capsules:"/api/capsule/",profile:"/api/profile/",member:"/api/member/",resource:"/api/resource/"},k=Object(y.b)("auth/authenticate",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.code,e.prev=1,e.next=4,w({url:N.auth,method:"POST",data:{code:r}});case 4:if(200!==(s=e.sent).status){e.next=11;break}return n=s.data.key,localStorage.setItem("access_token",n),e.abrupt("return",{access_token:s.data.key});case 11:return e.abrupt("return",c.rejectWithValue(s.data));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,c){return e.apply(this,arguments)}}()),S=Object(y.b)("auth/loadToken",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=localStorage.getItem("access_token"))){e.next=3;break}return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),C=Object(y.d)({name:"auth",initialState:{user:{},status:"pending",error:null},reducers:{setToken:function(e,t){e.user.access_token=t.payload},logout:function(e){localStorage.removeItem("access_token"),window.location.href="/home"}},extraReducers:(x={},Object(p.a)(x,k.pending,(function(e){e.status="pending"})),Object(p.a)(x,k.fulfilled,(function(e,t){var c=t.payload;e.status="fulfilled",e.user=c})),Object(p.a)(x,k.rejected,(function(e,t){var c=t.payload;e.status="rejected",e.error=c})),Object(p.a)(x,S.pending,(function(e){e.status="pending"})),Object(p.a)(x,S.fulfilled,(function(e,t){var c=t.payload;e.status="fulfilled",e.user.access_token=c})),Object(p.a)(x,S.rejected,(function(e,t){t.payload;e.status="rejected"})),x)}),I=function(e){return e.auth.user},T=function(e){return e.auth.status},M=C.actions,R=(M.setToken,M.resetToken,M.logout),_=C.reducer;function D(e){var t=e.image,c=e.title,r=e.activeTab,s=e.changeActiveTab,n=e.link,l=e.icon;return Object(d.jsx)(a.b,{className:m()("h-full lg:w-80 bg-gray-500 flex-grow w-full flex items-center justify-center rounded-t-xl",{"text-secondary":!r.includes(n),"text-primary bg-secondary":r.includes(n)}),to:"".concat(n),onClick:function(){return s(n)},children:Object(d.jsxs)("div",{className:"h-full w-full",children:[t&&Object(d.jsx)("img",{src:"".concat(t),title:"".concat(c),className:"h-full w-full object-contain animate-scale"}),l&&Object(d.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-lg md:text-2xl",children:[Object(d.jsx)(u.a,{icon:l}),Object(d.jsx)("p",{children:c})]})]})})}var W=function(e){var t=e.items,c=Object(r.useState)(null),s=Object(j.a)(c,2),n=s[0],a=s[1],o=Object(i.c)(I),u=Object(l.h)();function x(e){return!!(2===e.authState||o.access_token&&1===e.authState||!o.access_token&&0===e.authState)}function f(e){n.includes(e)&&a(e)}return Object(r.useEffect)((function(){t.filter((function(e){return x(e)&&u.pathname.includes(e.link)})).length>0?a(u.pathname):a("/dashboard")}),[u.pathname]),Object(d.jsx)("nav",{className:"h-full w-full",children:Object(d.jsx)("div",{className:"flex w-full flex-grow overflow-hidden h-full relative",children:n&&t.map((function(e){if(x(e))return Object(d.jsx)(D,{image:e.image,icon:e.icon,title:e.title,activeTab:n,changeActiveTab:f,link:e.link},t.indexOf(e))}))})})},V=c(42),A=c.n(V),L=c(43);var E=function(){var e=Object(i.b)(),t=Object(l.g)(),c=Object(i.c)(I);return Object(r.useEffect)((function(){c.access_token&&(t.location.state?t.push(t.location.state.referrer):t.push("/dashboard"))}),[c]),Object(d.jsxs)("div",{className:"flex flex-col space-y-2 bg-secondary items-center justify-center sm:min-h-0 rounded-b-2xl p-4",children:[Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-primary ",children:"Sign Up - Login"})}),Object(d.jsx)("div",{className:"flex-grow w-full h-16",children:Object(d.jsx)(A.a,{clientId:"354605905259-6ip0oar2l4prc4pg7fbktcu0771ibqm5.apps.googleusercontent.com",render:function(e){return Object(d.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"rounded-md bg-primary text-secondary min-w-full min-h-full font-bold text-2xl h-16",children:Object(d.jsx)("div",{className:"h-full w-full flex items-center justify-center space-x-2",children:Object(d.jsxs)("p",{children:["With ",Object(d.jsx)(u.a,{icon:L.a}),"oogle"]})})})},accessType:"offline",onSuccess:function(t){e(k({code:t.tokenId}))},onFailure:function(e){},cookiePolicy:"single_host_origin"})}),Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center",children:Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-sm text-center",children:"Make sure that you use a google account that you'll likely be using for a few more years because the Time Capsule notification emails will be sent there."})})]})};var U,z,F,P=function(e){var t=e.path,c=e.redirection,r=e.component,s=e.authRequired,n=void 0===s||s,a=Object(i.c)(I),o=Object(l.g)();return Object(d.jsx)(l.b,{path:t,render:function(){return a.access_token&&n||!a.access_token&&!n?Object(d.jsx)(r,{}):Object(d.jsx)(l.a,{to:{pathname:c,state:{referrer:o.location.pathname}}})}})},K=Object(y.b)("profile/fetchProfile",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=I(c.getState()),e.next=4,w({url:N.profile,method:"GET",headers:{Authorization:"Token ".concat(r.access_token)}});case 4:if(200!==(s=e.sent).status){e.next=9;break}return e.abrupt("return",s.data);case 9:return e.abrupt("return",c.rejectWithValue(s.data));case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,c){return e.apply(this,arguments)}}()),q=Object(y.d)({name:"profile",initialState:{entity:{},status:"pending",error:null},reducers:{},extraReducers:(U={},Object(p.a)(U,K.pending,(function(e){e.status="pending"})),Object(p.a)(U,K.fulfilled,(function(e,t){var c=t.payload;e.status="fulfilled",e.entity=c})),Object(p.a)(U,K.rejected,(function(e,t){var c=t.payload;e.status="rejected",e.error=c})),U)}),J=function(e){return e.profile.entity},G=(q.actions.changeTab,q.reducer),Y=function(e){for(var t,c=[],r=0;r<e.length;r++){var s={id:(t=e[r]).id,userId:t.user,capsuleId:t.capsule,resourceId:t.resource,state:t.state,status:t.status,userName:t.user_name,profilePicture:t.profile_picture};c.push(s)}return c},B=Object(y.b)("member/joinCapsule",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.capsuleKey,e.prev=1,s=I(c.getState()),n=J(c.getState()),e.next=6,w({url:N.member,method:"POST",headers:{Authorization:"Token ".concat(s.access_token)},data:{user:n.id,key:r}});case 6:if(201!==(a=e.sent).status){e.next=13;break}return"M"!==a.data.state&&"A"!==a.data.state||c.dispatch(ge({memberId:a.data.id,capsuleId:a.data.capsule})),l=Y([a.data]),e.abrupt("return",l[0]);case 13:return e.abrupt("return",c.rejectWithValue(a.data));case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,c){return e.apply(this,arguments)}}()),H=Object(y.b)("members/fetchCapsuleMembers",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.capsuleKey,e.prev=1,s=I(c.getState()),J(c.getState()),e.next=6,w({url:"".concat(N.capsules).concat(r,"/"),method:"GET",headers:{Authorization:"Token ".concat(s.access_token)}});case 6:if(200!==(n=e.sent).status){e.next=12;break}return a=Y(n.data),e.abrupt("return",a);case 12:return e.abrupt("return",c.rejectWithValue(n.data));case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,c){return e.apply(this,arguments)}}()),Q=Object(y.b)("members/updateMemberState",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.memberId,s=t.state,e.prev=1,n=I(c.getState()),J(c.getState()),e.next=6,w({url:"".concat(N.member).concat(r,"/"),method:"PUT",headers:{Authorization:"Token ".concat(n.access_token)},data:{state:s}});case 6:if(200!==(a=e.sent).status){e.next=12;break}return l=Y([a.data]),e.abrupt("return",l[0]);case 12:return e.abrupt("return",c.rejectWithValue(a.data));case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,c){return e.apply(this,arguments)}}()),X=Object(y.b)("members/updateMemberStatus",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.memberId,s=t.status,e.prev=1,n=I(c.getState()),J(c.getState()),e.next=6,w({url:"".concat(N.member).concat(r,"/"),method:"PUT",headers:{Authorization:"Token ".concat(n.access_token)},data:{status:s}});case 6:if(200!==(a=e.sent).status){e.next=12;break}return l=Y([a.data]),e.abrupt("return",l[0]);case 12:return e.abrupt("return",c.rejectWithValue(a.data));case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,c){return e.apply(this,arguments)}}()),Z=Object(y.c)({selectId:function(e){return e.id}}),$=Object(y.d)({name:"members",initialState:Z.getInitialState({status:"fulfilled",error:null}),reducers:{addMember:Z.addOne,updateMember:Z.updateOne,setMembers:Z.setAll,addMembers:Z.addMany},extraReducers:(z={},Object(p.a)(z,B.pending,(function(e){e.status="pending"})),Object(p.a)(z,B.fulfilled,(function(e,t){e.status="fulfilled",Z.addOne(e,t.payload)})),Object(p.a)(z,B.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),Object(p.a)(z,H.pending,(function(e){e.status="pending"})),Object(p.a)(z,H.fulfilled,(function(e,t){e.status="fulfilled",Z.addMany(e,t.payload)})),Object(p.a)(z,H.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),Object(p.a)(z,Q.pending,(function(e){e.status="pending"})),Object(p.a)(z,Q.fulfilled,(function(e,t){e.status="fulfilled",Z.upsertOne(e,t.payload)})),Object(p.a)(z,Q.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),Object(p.a)(z,X.pending,(function(e){e.status="pending"})),Object(p.a)(z,X.fulfilled,(function(e,t){e.status="fulfilled",Z.upsertOne(e,t.payload)})),Object(p.a)(z,X.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),z)}),ee=function(e){return e.members.entities},te=function(e){return e.members.ids},ce=function(e){return e.members.status},re=function(e){return e.members.error},se=$.actions,ne=(se.addMember,se.addMembers,se.setMember,se.setMembers),ae=se.updateMember,le=$.reducer,ie=c(26),oe=function(e){var t=e.id,c=e.key,r=e.name,s=e.state,n=e.is_public,a=e.creation_date,l=e.locking_date,i=e.unlocking_date,o=e.members;return{capsule:{id:t,key:c,name:r,state:s,isPublic:n,creationDate:a,lockingDate:l,unlockingDate:i,members:o.map((function(e){return e.id}))},members:Object(ie.a)(o)}},ue=function(e){for(var t=[],c=[],r=0;r<e.length;r++){var s=oe(e[r]),n=s.capsule,a=s.members;t.push(n),c=[].concat(Object(ie.a)(c),Object(ie.a)(a))}return{capsules:t,members:c}},de=Object(y.b)("capsules/fetchCapsules",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=I(c.getState()),e.next=4,w({url:N.capsules,method:"GET",headers:{Authorization:"Token ".concat(r.access_token)}});case 4:if(200!==(s=e.sent).status){e.next=11;break}return n=ue(s.data),a=n.capsules,l=n.members,c.dispatch(ne(Y(l))),e.abrupt("return",a);case 11:return e.abrupt("return",c.rejectWithValue(s.data));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,c){return e.apply(this,arguments)}}()),xe=Object(y.b)("capsules/createCapsule",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=I(c.getState()),e.next=4,w({url:N.capsules,method:"POST",headers:{Authorization:"Token ".concat(r.access_token)},data:{name:t.name,unlocking_date:"".concat(t.unlockingDate,"T00:00"),member:t.member,is_public:t.public}});case 4:if(201!==(s=e.sent).status){e.next=11;break}return c.dispatch(B({capsuleId:s.data.id,capsuleKey:s.data.key})),n=oe(s.data),a=n.capsule,n.members,e.abrupt("return",a);case 11:return e.abrupt("return",c.rejectWithValue(s.data));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,c){return e.apply(this,arguments)}}()),fe=Object(y.b)("capsules/lockCapsule",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.capsuleKey,e.prev=1,s=I(c.getState()),e.next=5,w({url:"".concat(N.capsules).concat(r,"/"),method:"PUT",headers:{Authorization:"Token ".concat(s.access_token)},data:{state:1}});case 5:if(200!==(n=e.sent).status){e.next=11;break}return a=oe(n.data),l=a.capsule,a.members,e.abrupt("return",l);case 11:return e.abrupt("return",c.rejectWithValue(n.data));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,c){return e.apply(this,arguments)}}()),je=Object(y.c)({selectId:function(e){return e.id}}),be=Object(y.d)({name:"capsules",initialState:je.getInitialState({status:"fulfilled",error:null}),reducers:{addCapsule:je.addOne,updateCapsule:je.updateOne,setCapsules:je.setAll,addCapsules:je.addMany,addCapsuleMember:function(e,t){var c=t.payload;e.entities[c.capsuleId].members.push(c.memberId)}},extraReducers:(F={},Object(p.a)(F,de.pending,(function(e,t){e.status="pending"})),Object(p.a)(F,de.fulfilled,(function(e,t){e.status="fulfilled",je.addMany(e,t.payload)})),Object(p.a)(F,de.rejected,(function(e,t){e.status="rejected"})),Object(p.a)(F,xe.pending,(function(e,t){e.status="pending"})),Object(p.a)(F,xe.fulfilled,(function(e,t){e.status="fulfilled",je.addOne(e,t.payload)})),Object(p.a)(F,xe.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),Object(p.a)(F,fe.pending,(function(e,t){e.status="pending"})),Object(p.a)(F,fe.fulfilled,(function(e,t){e.status="fulfilled",je.upsertOne(e,t.payload)})),Object(p.a)(F,fe.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),F)}),me=function(e){return e.capsules.ids},pe=function(e){return e.capsules.entities},he=function(e){return e.capsules.status},Oe=be.actions,ge=(Oe.addCapsule,Oe.updateCapsule,Oe.setCapsules,Oe.addCapsuleMember),ye=be.reducer;function ve(e){var t=e.name,c=e.creationDate,r=e.unlockDate,s=e.creators,n=e.toggleModal;return Object(d.jsx)("div",{className:"fixed inset-0 z-10 flex justify-center items-center bg-primary bg-opacity-70",children:Object(d.jsxs)("div",{className:"text-secondary bg-primary w-128 h-128 rounded-2xl p-6 flex flex-col shadow-xl border-seondary border-2 m-4",children:[Object(d.jsx)("div",{className:"flex-grow h-3/12 flex justify-center items-center",children:Object(d.jsx)("div",{className:"h-full",children:Object(d.jsx)("img",{src:"logo.png",className:"h-full"})})}),Object(d.jsx)("div",{className:"flex-grow h-1/12 flex justify-center items-center w-full",children:Object(d.jsx)("p",{className:"text-secondary text-md font-extrabold md:text-2xl text-center w-72 truncate",children:t})}),Object(d.jsxs)("div",{className:"flex-grow h-7/12 flex flex-col justify-center items-center",children:[Object(d.jsxs)("div",{className:"flex flex-grow flex-col justify-center items-center",children:[Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center ",children:Object(d.jsx)("p",{className:"text-secondary text-xs font-bold md:text-bold md:text-xl",children:"Creation Date:"})}),Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center",children:Object(d.jsx)("p",{className:"text-secondary text-xs font md:text-bold md:text-xl",children:c})})]}),Object(d.jsxs)("div",{className:"flex flex-grow flex-col justify-center items-center",children:[Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center ",children:Object(d.jsx)("p",{className:"text-secondary text-xs font-bold md:text-bold md:text-xl",children:"Unlock Date:"})}),Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center",children:Object(d.jsx)("p",{className:"text-secondary text-xs font md:text-bold md:text-xl",children:r})})]}),Object(d.jsxs)("div",{className:"h-4/6 w-full flex-grow justify-center items-center m-4 bg-secondary text-primary rounded-2xl overflow-hidden",children:[Object(d.jsx)("div",{className:"h-1/6 flex-grow flex justify-center items-center",children:Object(d.jsx)("p",{className:"text-primary text-xs font-bold md:text-bold md:text-xl",children:"Creators:"})}),Object(d.jsx)("div",{className:"h-5/6 overflow-y-auto",children:s.map((function(e){return Object(d.jsx)("p",{className:"text-center",children:e},s.indexOf(e))}))})]})]}),Object(d.jsx)("div",{className:"flex-grow h-1/12 flex justify-center items-center",children:Object(d.jsx)("button",{className:"bg-secondary text-primary h-full w-full rounded-2xl",onClick:n,children:"Close"})})]})})}function we(e){var t=e.capsule,c=e.countdown,r=e.toggleModal,s=e.handleLock,n=e.handleUnlock;return Object(d.jsxs)("div",{className:"flex justify-center items-center h-16 bg-primary rounded-2xl overflow-hide",children:[Object(d.jsxs)("div",{className:"flex flex-col flex-grow w-9/12 cursor-pointer",onClick:r,children:[Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center pr-4 pl-4",children:Object(d.jsx)("p",{className:"text-secondary text-md font-extrabold md:text-2xl text-center truncate",children:t.name})}),Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center",children:Object(d.jsx)("p",{className:"text-secondary text-xs font-semibold md:text-bold md:text-xl",children:c})})]}),Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center h-full w-3/12 bg-secondary rounded-r-2xl border-2 border-primary",children:Object(d.jsxs)("button",{className:m()("text-primary text-xs font-semibold md:text-bold md:text-xl w-full h-full outline-none",{"opacity-50 cursor-not-allowed":1===t.state}),onClick:function(){0===t.state?s(t):2===t.state&&n(t)},children:[0===t.state&&Object(d.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center space-x-1",children:[Object(d.jsx)(u.a,{icon:o.j}),Object(d.jsx)("p",{children:"Edit"})]}),1===t.state&&Object(d.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center space-x-1",children:[Object(d.jsx)(u.a,{icon:o.m}),Object(d.jsx)("p",{children:"Locked"})]}),2===t.state&&Object(d.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center space-x-1",children:[Object(d.jsx)(u.a,{icon:o.n,className:m()({"animate-bounce":2===t.state})}),Object(d.jsx)("p",{children:"Unlock"})]})]})})]})}var Ne=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),c=t[0],s=t[1],n=Object(r.useState)(null),a=Object(j.a)(n,2),x=a[0],f=a[1],b=(Object(i.b)(),Object(l.g)()),m=Object(i.c)(ee),p=Object(i.c)(te),h=Object(i.c)(J),O=Object(i.c)(pe),g=Object(i.c)(me),y=Object(i.c)(he),v=Object(r.useState)(T()),w=Object(j.a)(v,2),N=w[0],k=w[1];function S(e,t){f(t),s(e)}function C(e){if(e){var t=function(e){var t=p.filter((function(e){return m[e].userId===h.id}));return e.filter((function(e){return t.includes(e)}))[0]}(e.members);b.push("/edit/".concat(t))}}function I(e){e&&b.push("/view/".concat(e.key))}function T(){for(var e={},t=0;t<g.length;t++){var c=+Date.parse(O[g[t]].unlockingDate)-+Date.now();if(c<=0)e[g[t]]="00D 00:00:00";else{var r={days:Math.floor(c/864e5).toString().padStart(2,"0"),hours:Math.floor(c/36e5%24).toString().padStart(2,"0"),minutes:Math.floor(c/1e3/60%60).toString().padStart(2,"0"),seconds:Math.floor(c/1e3%60).toString().padStart(2,"0")};e[g[t]]="".concat(r.days,"D ").concat(r.hours,":").concat(r.minutes,":").concat(r.seconds)}}return e}return Object(r.useEffect)((function(){var e=setTimeout((function(){k(T())}),1e3);return function(){return clearTimeout(e)}}),[N]),Object(d.jsxs)("div",{className:"w-full h-full",children:[c&&null!==x&&Object(d.jsx)(ve,{toggleModal:function(){return S(!c)},name:O[x].name,creationDate:O[x].creationDate,unlockDate:O[x].unlockingDate,creators:O[x].members.map((function(e){return m[e].userName}))}),Object(d.jsxs)("div",{className:"bg-secondary rounded-b-2xl p-4 space-y-2",children:[Object(d.jsx)("div",{className:"flex justify-center items-center felx-grow",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-primary text-center",children:"Time Capsules"})}),"pending"===y&&!O&&Object(d.jsx)("p",{children:"Loading"}),O&&g.map((function(e){return Object(d.jsx)(we,{capsule:O[e],handleLock:C,handleUnlock:I,countdown:N[e],toggleModal:function(){return S(!c,O[e].id)}},O[e].id)})),0===g.length&&Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-2 text-lg text-primary",children:[Object(d.jsx)("p",{className:"font-bold",children:"None"}),Object(d.jsx)(u.a,{icon:o.k})]})]})]})};function ke(){Object(l.g)();var e=Object(i.b)();return Object(d.jsx)("div",{className:"flex flex-col bg-secondary items-center justify-center sm:min-h-0 rounded-b-2xl p-4",children:Object(d.jsx)("button",{className:"rounded-md bg-primary text-secondary h-16 w-48 font-bold text-2xl",onClick:function(){e(R())},children:"Logout"})})}function Se(e){var t=e.capsuleURL,c=e.capsuleMember,s=Object(r.useState)("Copy"),n=Object(j.a)(s,2),a=n[0],i=n[1],x=Object(l.g)();return Object(d.jsx)("div",{className:"fixed inset-0 z-10 flex justify-center items-center bg-primary bg-opacity-70 p-4",children:Object(d.jsxs)("div",{className:"text-secondary bg-primary w-128 h-72 rounded-2xl p-6 flex flex-col shadow-xl border-seondary border-2 space-y-2",children:[Object(d.jsx)("div",{className:"flex justify-center items-center felx-grow",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-secondary text-center",children:"Your Time Capsule is ready!"})}),Object(d.jsx)("div",{className:"flex-grow flex justify-center items-end",children:Object(d.jsx)("p",{className:"text-secondary text-xs md:text-lg",children:"Share memories with friends:"})}),Object(d.jsxs)("div",{className:"flex justify-center items-center flex-grow ",children:[Object(d.jsx)("div",{className:"text-secondary text-sm font-bold md:text-bold md:text-xl flex flex-grow justify-center items-center rounded-l-2xl h-16 w-5/6 border-secondary border-2 rounder-l-2xl overflow-hidden",children:Object(d.jsx)("div",{className:"overflow-x-auto h-full flex items-center justify-center",children:Object(d.jsx)("p",{className:"w-full whitespace-pre select-all",children:t})})}),Object(d.jsx)("button",{className:"bg-secondary text-primary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-1/6 h-16 rounded-r-2xl",type:"text",onClick:function(){navigator.clipboard.writeText(t),i("Done!")},children:Object(d.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center space-x-1",children:[Object(d.jsx)(u.a,{icon:o.i}),Object(d.jsx)("p",{children:a})]})})]}),Object(d.jsx)("div",{className:"flex justify-center items-center flex-grow",children:Object(d.jsx)("button",{className:"bg-secondary text-primary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-full h-16 rounded-2xl ",type:"text",onClick:function(){x.push("/edit/".concat(c))},children:"Continue"})})]})})}var Ce,Ie=function(){var e=Object(r.useState)(0),t=Object(j.a)(e,2),c=(t[0],t[1],Object(r.useState)(0)),s=Object(j.a)(c,2),n=s[0],a=s[1],l=Object(r.useState)(""),o=Object(j.a)(l,2),u=o[0],x=o[1],f=Object(r.useState)(""),b=Object(j.a)(f,2),p=b[0],h=b[1],O=Object(r.useState)(!1),g=Object(j.a)(O,2),y=g[0],v=g[1],w=Object(r.useState)(!0),N=Object(j.a)(w,2),k=(N[0],N[1],Object(r.useState)(0)),S=Object(j.a)(k,2),C=S[0],I=S[1],T=Object(r.useState)(null),M=Object(j.a)(T,2),R=M[0],_=M[1],D=Object(r.useState)(!1),W=Object(j.a)(D,2),V=W[0],A=W[1],L=Object(i.c)(pe),E=Object(i.c)(me),U=Object(i.c)(he);Object(r.useEffect)((function(){if("pending"!==U&&C){var e=L[E[E.length-1]];if(e.members.length){var t="".concat(e.key);_({capsuleURL:t,capsuleMember:e.members[0]})}}}),[L]),Object(r.useEffect)((function(){R&&A(1)}),[R]);var z=Object(i.c)(J),F=Object(i.b)();return Object(d.jsxs)("div",{children:[V&&Object(d.jsx)(Se,{capsuleURL:R.capsuleURL,capsuleMember:R.capsuleMember}),Object(d.jsx)("div",{className:"bg-secondary rounded-b-2xl p-4 ",children:Object(d.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(d.jsx)("div",{className:"flex justify-center items-center felx-grow",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-primary text-center",children:"Create a Time Capsule"})}),Object(d.jsxs)("div",{className:"flex justify-center items-center felx-grow h-16",children:[Object(d.jsx)("div",{className:"text-primary text-sm font-bold md:text-bold md:text-xl flex flex-grow justify-center items-center rounded-l-2xl h-full w-3/12 border-primary border-2 rounder-l-2xl",children:Object(d.jsx)("p",{className:"text-center",children:"Name"})}),Object(d.jsx)("input",{className:m()("bg-primary text-secondary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-9/12 h-full rounded-r-2xl pl-2",{"outline-primary":y&&!u}),type:"text",onChange:function(e){x(e.target.value)}})]}),Object(d.jsxs)("div",{className:"flex justify-center items-center felx-grow h-16",children:[Object(d.jsx)("div",{className:"text-primary text-sm font-bold md:text-bold md:text-xl flex flex-grow justify-center items-center rounded-l-2xl h-full w-3/12 border-primary border-2 rounder-l-2xl",children:Object(d.jsx)("p",{className:"text-center",children:"Unlock Date"})}),Object(d.jsx)("input",{className:m()("bg-primary text-secondary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-9/12 h-full rounded-r-2xl pl-2",{"outline-primary":y&&!p}),type:"date",value:p,onChange:function(e){+Date.parse(e.target.value)>+Date.now()+2592e6&&h(e.target.value)}})]}),Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center",children:Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-bold md:text-xl text-center",children:"* Minimum value is 30 days from now!"})}),Object(d.jsx)("div",{className:"flex justify-center items-start felx-grow flex-col space-y-2",children:Object(d.jsx)("div",{className:"flex-grow flex justify-center items-center",children:Object(d.jsxs)("button",{className:"flex-grow flex justify-center items-center space-x-2",onClick:function(){return a(!n)},children:[Object(d.jsx)("button",{className:m()("border-2 border-primary h-6 w-6 rounded-lg",{"bg-primary":n,"bg-secondary":!n})}),Object(d.jsx)("p",{className:"text-primary text-xs font-semibold md:text-bold md:text-xl",children:"Viewable for public"})]})})}),Object(d.jsx)("div",{className:"flex flex-col flex-grow w-full items-center justify-center h-16",children:Object(d.jsx)("button",{className:"rounded-md bg-primary text-secondary w-full h-full font-bold text-2xl",onClick:function(){if(u&&p&&z)return F(xe({name:u,unlockingDate:p,member:z.id,public:n})),I(1),v(!1),!0;v(!0)},children:"Create"})})]})})]})},Te=function(e){for(var t,c=[],r=0;r<e.length;r++){var s={id:(t=e[r]).id,memberId:t.member,message:t.message,images:t.images.map((function(e){return"".concat(e.content)}))};c.push(s)}return{resources:c}},Me=Object(y.b)("resources/fetchResource",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.memberId,e.prev=1,s=I(c.getState()),e.next=5,w({url:"".concat(N.resource).concat(r,"/"),method:"GET",headers:{Authorization:"Token ".concat(s.access_token)}});case 5:if(200!==(n=e.sent).status){e.next=11;break}return a=Te([n.data]),l=a.resources,e.abrupt("return",l[0]);case 11:return e.abrupt("return",c.rejectWithValue(n.data));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,c){return e.apply(this,arguments)}}()),Re=Object(y.b)("resources/fetchCapsuleResources",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.capsuleKey,e.prev=1,s=I(c.getState()),e.next=5,w({url:"".concat(N.resource),method:"GET",headers:{Authorization:"Token ".concat(s.access_token)},params:{key:r}});case 5:if(200!==(n=e.sent).status){e.next=11;break}return a=Te(n.data),l=a.resources,e.abrupt("return",l);case 11:return e.abrupt("return",c.rejectWithValue(n.data));case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,c){return e.apply(this,arguments)}}()),_e=Object(y.b)("resources/uploadResource",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a,l,i,o,u,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.memberId,s=t.message,n=t.images,e.prev=1,a=I(c.getState()),l=new FormData,i=0;i<n.length;i++)l.append("content",n[i]);return l.append("member",r),l.append("message",s),e.next=9,w({url:N.resource,method:"POST",headers:{Authorization:"Token ".concat(a.access_token),"Content-Type":"multipart/form-data"},data:l});case 9:if(201!==(o=e.sent).status){e.next=16;break}return u=Te([o.data]),d=u.resources,c.dispatch(ae({id:d[0].memberId,changes:{resourceId:d[0].id}})),e.abrupt("return",d[0]);case 16:return e.abrupt("return",c.rejectWithValue(o.data));case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,c){return e.apply(this,arguments)}}()),De=Object(y.b)("resources/updateResource",function(){var e=Object(g.a)(O.a.mark((function e(t,c){var r,s,n,a,l,i,o,u,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.memberId,s=t.message,n=t.images,e.prev=1,a=I(c.getState()),l=new FormData,i=0;i<n.length;i++)l.append("content",n[i]);return l.append("member",r),l.append("message",s),e.next=9,w({url:"".concat(N.resource).concat(r,"/"),method:"PUT",headers:{Authorization:"Token ".concat(a.access_token),"Content-Type":"multipart/form-data"},data:l});case 9:if(200!==(o=e.sent).status){e.next=15;break}return u=Te([o.data]),d=u.resources,e.abrupt("return",d[0]);case 15:return e.abrupt("return",c.rejectWithValue(o.data));case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(1),e.abrupt("return",c.rejectWithValue({data:e.t0.response.data,status:e.t0.response.status}));case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,c){return e.apply(this,arguments)}}()),We=Object(y.c)({selectId:function(e){return e.id}}),Ve=Object(y.d)({name:"resources",initialState:We.getInitialState({status:"fulfilled",error:null}),reducers:{addResource:We.addOne,updateResource:We.upsertOne,setResources:We.setAll,addResources:We.addMany},extraReducers:(Ce={},Object(p.a)(Ce,_e.pending,(function(e){e.status="pending"})),Object(p.a)(Ce,_e.fulfilled,(function(e,t){e.status="fulfilled",We.addOne(e,t.payload)})),Object(p.a)(Ce,_e.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),Object(p.a)(Ce,De.pending,(function(e){e.status="pending"})),Object(p.a)(Ce,De.fulfilled,(function(e,t){e.status="fulfilled",We.upsertOne(e,t.payload)})),Object(p.a)(Ce,De.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),Object(p.a)(Ce,Me.pending,(function(e){e.status="pending"})),Object(p.a)(Ce,Me.fulfilled,(function(e,t){e.status="fulfilled",We.addOne(e,t.payload)})),Object(p.a)(Ce,Me.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),Object(p.a)(Ce,Re.pending,(function(e){e.status="pending"})),Object(p.a)(Ce,Re.fulfilled,(function(e,t){e.status="fulfilled",We.addMany(e,t.payload)})),Object(p.a)(Ce,Re.rejected,(function(e,t){e.status="rejected",e.error=t.payload})),Ce)}),Ae=function(e){return e.resources.entities},Le=function(e){return e.resources.ids},Ee=function(e){return e.resources.status},Ue=Ve.actions,ze=(Ue.addResource,Ue.addResources,Ue.setResource,Ue.setResources,Ve.reducer);function Fe(e){var t=e.images,c=e.image,s=e.toggleModal,n=Object(r.useState)(c),a=Object(j.a)(n,2),l=a[0],i=a[1];function x(e){0<=l+e&&l+e<t.length&&i(l+e)}return Object(d.jsx)("div",{className:"fixed inset-0 z-10 flex justify-center items-center bg-primary bg-opacity-70",children:Object(d.jsxs)("div",{className:"text-secondary bg-primary w-128 h-11/12 rounded-2xl p-6 flex flex-col shadow-xl border-seondary border-2 m-4",children:[Object(d.jsx)("div",{className:"flex flex-grow items-center justify-center h-11/12",children:Object(d.jsx)("img",{src:t[l],className:"object-contain"})}),Object(d.jsxs)("div",{className:"flex-grow h-1/12 flex justify-center items-center space-x-1",children:[Object(d.jsx)("button",{className:m()("bg-secondary text-primary h-full w-full rounded-l-2xl",{"opacity-50 cursor-not-allowed":0===l}),onClick:function(){return x(-1)},children:Object(d.jsx)("div",{className:"h-full w-full flex items-center justify-center space-x-2 text-primary",children:Object(d.jsx)(u.a,{icon:o.f})})}),Object(d.jsx)("button",{className:"bg-secondary text-primary h-full w-full ",onClick:s,children:Object(d.jsx)("div",{className:"h-full w-full flex items-center justify-center space-x-2 text-primary",children:Object(d.jsx)(u.a,{icon:o.s})})}),Object(d.jsx)("button",{className:m()("bg-secondary text-primary h-full w-full rounded-r-2xl",{"opacity-50 cursor-not-allowed":l===t.length-1}),onClick:function(){return x(1)},children:Object(d.jsx)("div",{className:"h-full w-full flex items-center justify-center space-x-1 text-primary",children:Object(d.jsx)(u.a,{icon:o.g})})})]})]})})}function Pe(e){var t=Object(r.useState)(!1),c=Object(j.a)(t,2),s=c[0],n=c[1];return Object(d.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full space-y-3",children:[Object(d.jsx)("div",{className:"w-full flex items-center justify-start",children:Object(d.jsx)("div",{className:"text-primary font-bold text-lg md:font-extrabold md:text-xl outline-none cursor-pointer select-none",onClick:function(){return n(!s)},children:Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-2",children:[Object(d.jsx)(u.a,{icon:s?o.a:o.b}),Object(d.jsx)("p",{children:e.name})]})})}),Object(d.jsx)("div",{className:"w-full h-full",children:!1===s&&e.children})]})}function Ke(e){var t=e.requestingMembers,c=e.handleRequestAction;e.loading;return Object(d.jsx)("div",{className:"relative flex flex-col items-center justify-center w-full space-y-3",children:t.map((function(e){return Object(d.jsxs)("div",{className:"h-20 w-full flex items-center justify-center bg-primary rounded-2xl p-4 space-x-2",children:[Object(d.jsx)("div",{className:"flex items-center justify-center",children:Object(d.jsx)("div",{className:"w-16 h-18 rounded-full overflow-hidden bg-secondary",children:Object(d.jsx)("img",{src:"../logo.png",className:"object-contain"})})}),Object(d.jsx)("div",{className:"flex items-center justify-start flex-grow",children:Object(d.jsx)("p",{className:"md:text-xl font-bold text-sm md:font-extrabold text-secondary",children:e.userName})}),Object(d.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[Object(d.jsx)("button",{className:"w-10 h-10 bg-secondary text-primary rounded-l-2xl",onClick:function(){return c(e.id,!0)},children:Object(d.jsx)("div",{className:"h-full w-full flex items-center justify-center space-x-1 text-primary",children:Object(d.jsx)(u.a,{icon:o.d})})}),Object(d.jsx)("button",{className:"w-10 h-10 bg-secondary text-primary rounded-r-2xl",onClick:function(){return c(e.id,!1)},children:Object(d.jsx)("div",{className:"h-full w-full flex items-center justify-center space-x-1 text-primary",children:Object(d.jsx)(u.a,{icon:o.s})})})]})]},e.id)}))})}function qe(e){var t=Object(r.useState)([]),c=Object(j.a)(t,2);c[0],c[1];function s(e){var t=Object(r.useState)(!0),c=Object(j.a)(t,2),s=c[0],n=c[1];return Object(d.jsxs)("div",{className:"w-full h-full",children:[Object(d.jsxs)("div",{className:m()("flex-grow flex space-x-2 justify-center cursor-pointer select-none w-full",{"border-primary border-b-2":s}),onClick:function(){return n(!s)},children:[Object(d.jsx)("div",{className:"flex items-center justify-center",children:Object(d.jsx)("div",{className:"w-16 h-18 rounded-tl-2xl overflow-hidden bg-primary",children:Object(d.jsx)("img",{src:"../logo.png",className:"object-contain"})})}),Object(d.jsx)("div",{className:"flex items-center justify-start flex-grow",children:Object(d.jsx)("p",{className:"md:text-xl font-bold md:font-extrabold text-primary",children:e.member.userName})})]}),Object(d.jsx)("div",{className:m()("w-full h-full",{"p-6":s}),children:!0===s&&e.children})]})}function n(e){var t=Object(r.useState)(!1),c=Object(j.a)(t,2),s=c[0],n=c[1],a=Object(r.useState)(!1),l=Object(j.a)(a,2),i=l[0],o=l[1];return Object(d.jsxs)("div",{className:"w-full h-full",children:[!0===s&&Object(d.jsx)(Fe,{image:i,images:e.resource.images,toggleModal:function(){return n(!s)}}),Object(d.jsxs)("div",{className:"w-full h-fullflex flex-col items-start justify-center space-y-3",children:[Object(d.jsx)("div",{className:"flex-grow text-primary",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"text-sm md:text-xl font-semibold md:font-bold ",children:"Message"}),Object(d.jsx)("p",{className:"text-sm md:text-xl italic",children:e.resource.message})]})}),Object(d.jsxs)("div",{className:"flex-grow text-primary",children:[Object(d.jsx)("p",{className:"text-sm md:text-xl font-semibold md:font-bold ",children:"Images"}),Object(d.jsx)("div",{className:"flex items-center justify-start flex-wrap",children:e.resource.images.map((function(t){return Object(d.jsx)("div",{className:"flex md:h-44 md:w-44 w-24 h-24 bg-primary m-1 p-1 rounded-xl cursor-pointer",onClick:function(){n(!0),o(e.resource.images.indexOf(t))},children:Object(d.jsx)("img",{src:t,className:"rounded-xl object-cover"})},e.resource.images.indexOf(t))}))})]})]})]})}return Object(d.jsx)("div",{className:"flex flex-col space-y-2 items-center justify-center w-full",children:Object(d.jsx)("div",{className:"flex flex-col justify-center items-start w-full space-y-3",children:e.members.map((function(t){var c=e.resources.filter((function(e){return e.memberId===parseInt(t.id)}));return Object(d.jsx)("div",{className:"border-primary border-2 w-full h-full rounded-3xl overflow-hidden",children:Object(d.jsxs)(s,{member:t,children:[c.length>0&&Object(d.jsx)(n,{resource:c[0]}),0===c.length&&Object(d.jsx)("p",{className:"text-sm md:text-xl font-semibold md:font-bold text-primary",children:"Nothing was submitted."})]},t.id)},t.id)}))})})}function Je(e){var t=Object(r.useState)("Copy"),c=Object(j.a)(t,2);c[0],c[1],Object(l.g)();return Object(d.jsx)("div",{className:"fixed inset-0 z-10 flex justify-center items-center bg-primary bg-opacity-70 p-4",children:Object(d.jsxs)("div",{className:"text-secondary bg-primary w-128 h-64 rounded-2xl p-6 flex flex-col shadow-xl border-seondary border-2 space-y-2",children:[Object(d.jsx)("div",{className:"flex justify-center items-center felx-grow",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-secondary text-center",children:e.header})}),Object(d.jsx)("div",{className:"flex justify-center items-center flex-grow ",children:Object(d.jsx)("p",{className:"text-center font-semibold",children:e.body})}),Object(d.jsx)("div",{className:"h-16 flex justify-center items-center space-x-2",children:e.buttons.map((function(t){return Object(d.jsx)("button",{className:"bg-secondary text-primary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-full h-16 rounded-2xl ",type:"text",onClick:e.buttonsFunctions[t],children:t},t)}))})]})})}function Ge(e){var t=Object(r.useState)(!1),c=Object(j.a)(t,2),s=c[0],n=c[1],a=Object(r.useState)(e.message),i=Object(j.a)(a,2),x=i[0],f=i[1],b=Object(r.useState)(e.renderImages),p=Object(j.a)(b,2),h=p[0],O=p[1],g=Object(r.useState)([]),y=Object(j.a)(g,2),v=y[0],w=y[1],N=Object(r.useState)(!1),k=Object(j.a)(N,2),S=k[0],C=k[1],I=Object(r.useState)(!1),T=Object(j.a)(I,2),M=T[0],R=T[1],_=Object(r.useState)(0),D=Object(j.a)(_,2),W=D[0],V=D[1],A=Object(r.useState)(0),L=Object(j.a)(A,2),E=L[0],U=L[1],z=Object(r.useState)(1),F=Object(j.a)(z,2),P=F[0],K=F[1],q=Object(r.useState)(1),J=Object(j.a)(q,2),G=J[0],Y=J[1];function B(){E&&(U(0),n(0))}function H(){R(!M)}Object(r.useEffect)((function(){x&&x===e.message&&0===v.length&&(U(1),void 0!==e.members[e.memberId].resourceId&&K(0))}),[]),Object(r.useEffect)((function(){"R"===e.members[e.memberId].status?Y(0):Y(1)}),[e.members[e.memberId].status]);var Q=Object(l.g)();function X(){return 0===e.capsuleMembers.filter((function(t){return"N"===e.members[t].status})).length}return Object(d.jsxs)("div",{className:"w-full h-full",children:[X()&&M&&Object(d.jsx)(Je,{header:"Are you sure?",body:"You won't be able to edit or view the Capsule until it is unlocked!",buttons:["Confirm","Close"],buttonsFunctions:{Close:H,Confirm:e.handleLock}}),X()&&M&&1===e.capsule.state&&Object(d.jsx)(Je,{header:"Done!",body:"The capsule has successfully been locked! You'll be sent an Email once it's unlocked.",buttons:["Dashboard"],buttonsFunctions:{Dashboard:function(){Q.push("/dashboard")}}}),!X()&&M&&Object(d.jsx)(Je,{header:"Cannot lock the Capsule.",body:"Some members are still not ready!",buttons:["Close"],buttonsFunctions:{Close:H}}),!0===S&&Object(d.jsx)(Fe,{images:h,image:W,toggleModal:function(){C(!S)}}),Object(d.jsxs)("div",{className:"flex flex-col flex-grow justify-center items-center w-full space-y-2",children:[Object(d.jsxs)("div",{className:"w-full flex flex-grow flex-col justify-center items-center",children:[Object(d.jsx)("div",{className:"flex flex-grow justify-center items-center w-full h-1/12",children:Object(d.jsx)("div",{className:"flex justify-center items-center w-2/6 bg-primary rounded-t-lg h-full p-2",children:Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-1 text-secondary",children:[Object(d.jsx)(u.a,{icon:o.h}),Object(d.jsx)("p",{className:"font-semibold md:font-bold md:text-xl",children:"Message"})]})})}),Object(d.jsx)("div",{type:"text",className:m()("p-2 bg-primary text-secondary text-sm font-semibold md:font-bold md:text-lg flex-grow w-full h-11/12 rounded-2xl overflow-hidden",{"outline-primary":s&&x===e.message}),children:Object(d.jsx)("textarea",{className:"resize-none bg-primary text-secondary w-full h-full rounded-2xl outline-none",onChange:function(e){f(e.target.value),B()},value:x})})]}),Object(d.jsxs)("div",{className:"w-full flex flex-grow flex-col justify-center items-center",children:[Object(d.jsx)("div",{className:"flex flex-grow justify-center items-center w-full h-1/12",children:Object(d.jsx)("div",{className:"flex justify-center items-center w-2/6 bg-primary rounded-t-lg h-full p-2",children:Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-1 text-secondary",children:[Object(d.jsx)(u.a,{icon:o.l}),Object(d.jsx)("p",{className:"font-semibold md:font-bold md:text-xl",children:"Files"})]})})}),Object(d.jsxs)("div",{type:"text",className:m()("space-y-2 flex flex-col p-2 bg-primary text-secondary text-sm font-semibold md:font-bold md:text-lg outline-none flex-grow w-full h-11/12 rounded-2xl",{"outline-primary":s&&!v.length}),children:[Object(d.jsx)("div",{className:"flex flex-grow justify-center items-center w-full h-1/6",children:Object(d.jsxs)("label",{className:"flex items-center justify-center rounded-md bg-secondary text-primary h-10 w-48 font-bold text-2xl cursor-pointer",children:[Object(d.jsx)("p",{children:"Select Files"}),Object(d.jsx)("input",{type:"file",className:"hidden",onChange:function(t){if(t.target.files){w(t.target.files);var c=Array.from(t.target.files).map((function(e){return URL.createObjectURL(e)}));O(e.renderImages?c.concat(e.renderImages):c),Array.from(t.target.files).map((function(e){return URL.revokeObjectURL(e)}))}B()},multiple:!0})]})}),Object(d.jsx)("div",{className:"flex flex-grow flex-wrap justify-center items-center w-full h-5/6 ",children:h&&h.map((function(e){return Object(d.jsx)("div",{className:"flex md:h-44 md:w-44 w-24 h-24 bg-secondary m-1 p-1 rounded-xl cursor-pointer",onClick:function(){return function(e){C(!0),V(h.indexOf(e))}(e)},children:Object(d.jsx)("img",{src:e,className:"rounded-xl object-cover"})},h.indexOf(e))}))})]})]}),Object(d.jsx)("div",{className:"flex flex-grow h-16 w-full items-center justify-center",children:Object(d.jsxs)("div",{className:"flex flex-row flex-grow justify-center items-center w-full h-full space-x-1",children:[Object(d.jsx)("button",{className:m()("h-10 flex-grow rounded-md bg-primary text-secondary font-bold text-lg md:text-2xl w-3/6",{"opacity-50 cursor-not-allowed":E}),onClick:function(){x&&v.length>0&&!E?(n(0),e.handleSubmit(x,v)):n(1)},children:Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-2",children:[Object(d.jsx)(u.a,{icon:o.e}),Object(d.jsx)("p",{children:"Submit"})]})}),Object(d.jsx)("button",{className:m()("h-10 flex-grow rounded-md bg-primary text-secondary font-bold text-lg md:text-2xl w-3/6",{"opacity-50 cursor-not-allowed":P}),onClick:function(t){!P&&e.handleReady(t)},children:e.members[e.memberId]&&"R"===e.members[e.memberId].status?Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-2",children:[Object(d.jsx)(u.a,{icon:o.s}),Object(d.jsx)("p",{children:"Ready"})]}):Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-2",children:[Object(d.jsx)(u.a,{icon:o.d}),Object(d.jsx)("p",{children:"Ready"})]})}),e.isAdmin&&Object(d.jsx)("button",{className:m()("h-10 flex-grow rounded-md bg-primary text-secondary font-bold text-lg md:text-2xl w-3/6",{"opacity-50 cursor-not-allowed":G}),onClick:function(e){G||R(!0)},children:Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-2",children:[Object(d.jsx)(u.a,{icon:o.m}),Object(d.jsx)("p",{children:"Lock"})]})})]})})]})]})}var Ye=function(){var e=Object(r.useState)(0),t=Object(j.a)(e,2),c=t[0],s=t[1],n=Object(r.useState)(!1),a=Object(j.a)(n,2),x=a[0],f=a[1],b=Object(r.useState)([]),m=Object(j.a)(b,2),p=m[0],h=m[1],O=Object(i.b)(),g=Object(l.i)().id,y=Object(i.c)(pe),v=Object(i.c)(me),w=Object(i.c)(ee),N=Object(i.c)(ce),k=Object(i.c)(te),S=Object(i.c)(Ae),C=Object(i.c)(Le),I=(Object(i.c)(Ee),Object(i.c)(J)),T=v.filter((function(e){return y[e].members.includes(parseInt(g))})),M=k.filter((function(e){return w[e].capsuleId===parseInt(T[0])})),R=C.filter((function(e){return S[e]}));Object(r.useEffect)((function(){s(1)}),[]),Object(r.useEffect)((function(){k.includes(parseInt(g))&&(f("A"===w[g].state),h(k.filter((function(e){return w[e].capsuleId===w[g].capsuleId&&"W"===w[e].state}))))}),[w]),Object(r.useEffect)((function(){0!==T.length&&(0===y[T[0]].state&&s(0),O(H({capsuleKey:y[T[0]].key})),O(Re({capsuleKey:y[T[0]].key})))}),[T[0]]);var _=C.filter((function(e){return S[e].memberId===parseInt(g)}));return 1===c?Object(d.jsx)("div",{className:"flex flex-col h-64 items-center justify-center rounded-b-2xl bg-secondary",children:Object(d.jsx)("div",{className:"flex items-center justify-center",children:Object(d.jsx)("p",{className:"flex-grow font-bold text-primary",children:"Not found."})})}):Object(d.jsx)("div",{className:"bg-secondary relative overflow-hidden rounded-b-2xl",children:k.length>0&&k.includes(parseInt(g))&&T.length>0&&Object(d.jsxs)("div",{className:"flex flex-col justify-center items-center p-4 space-y-3",children:[Object(d.jsx)("div",{className:"flex justify-center items-center felx-grow w-full",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-primary text-center truncate",children:T.length>0&&y[T[0]].name})}),Object(d.jsx)(Ge,{handleSubmit:function(e,t){var c=!(0===_.length);O(c?De({memberId:g,message:e,images:t}):_e({memberId:g,message:e,images:t}))},handleReady:function(){var e="R"===w[g].status?"N":"R";O(X({memberId:g,status:e}))},handleLock:function(){O(fe({capsuleKey:y[T[0]].key}))},members:w,capsuleMembers:M,capsule:y[T[0]],memberId:g,isAdmin:x,renderImages:_.length>0?S[_[0]].images:null,message:_.length>0?S[_[0]].message:null},_),x&&k.length>0&&k.includes(parseInt(g))&&Object(d.jsxs)(Pe,{name:"Requests",children:[Object(d.jsx)(Ke,{requestingMembers:p.map((function(e){return w[e]})),handleRequestAction:function(e,t){O(Q({memberId:e,state:t?"M":"B"}))},loading:"pending"===N}),0===p.length&&Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-2 text-lg text-primary",children:[Object(d.jsx)("p",{className:"font-bold",children:"None"}),Object(d.jsx)(u.a,{icon:o.k})]})]}),k.length>0&&k.includes(parseInt(g))&&Object(d.jsxs)(Pe,{name:"Other Members",children:[M.length>0&&R.length>0&&Object(d.jsx)(qe,{members:M.map((function(e){return w[e]})).filter((function(e){return e.userId!==I.id})),resources:R.map((function(e){return S[e]}))}),R.length<=1&&M.length<=1&&Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-2 text-lg text-primary",children:[Object(d.jsx)("p",{className:"font-bold",children:"None"}),Object(d.jsx)(u.a,{icon:o.k})]})]})]})})};function Be(e){var t=e.handleJoin,c=Object(r.useState)(""),s=Object(j.a)(c,2),n=s[0],a=s[1],l=Object(r.useState)(0),i=Object(j.a)(l,2),o=i[0],u=i[1];return Object(d.jsxs)("div",{className:"flex w-full justify-center items-center h-16",children:[Object(d.jsx)("input",{className:m()("outline-none p-2 text-primary text-sm font-bold md:text-bold md:text-xl flex flex-grow justify-center items-center rounded-l-2xl h-full w-9/12 border-primary border-2 rounder-l-2xl overflow-hidden bg-secondary",{"outline-primary":o&&!n}),onChange:function(e){a(e.target.value)}}),Object(d.jsx)("button",{className:"bg-primary text-secondary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-3/12 h-full rounded-r-2xl",onClick:function(){n?(t(n),u(0)):u(1)},children:"Join"})]})}function He(e){var t=e.message,c=e.buttonMessage,r=e.buttonIcon,s=e.handleFeedbackOnClick;return Object(d.jsxs)("div",{className:"flex flex-col w-full justify-center items-center flex-grow",children:[Object(d.jsx)("div",{className:"flex flex-grow items-center justify-center",children:Object(d.jsx)("p",{className:"text-primary text-md font-bold md:text-xl text-center",children:t})}),Object(d.jsx)("div",{className:"flex flex-grow items-end justify-start w-3/6",children:Object(d.jsx)("button",{className:"bg-primary text-secondary text-md font-bold md:text-xl outline-none flex-grow w-full h-16 rounded-2xl",onClick:s,children:Object(d.jsxs)("div",{className:"h-full w-full flex items-center justify-center space-x-3",children:[Object(d.jsx)(u.a,{icon:r}),Object(d.jsx)("p",{children:c})]})})})]})}var Qe=function(){var e=Object(r.useState)(0),t=Object(j.a)(e,2),c=t[0],s=t[1],n=Object(r.useState)(null),a=Object(j.a)(n,2),u=a[0],x=a[1],f=Object(r.useState)(0),b=Object(j.a)(f,2),m=b[0],p=b[1],h=Object(i.b)(),O=Object(l.g)(),g=Object(i.c)(ce),y=Object(i.c)(re);return Object(r.useEffect)((function(){"pending"===g&&p(1),m&&("fulfilled"===g?(x({message:"Request has been sent!",buttonMessage:"Dashboard",buttonIcon:o.c}),s(1)):"rejected"===g&&y&&(x({message:"Capsule is not found.",buttonMessage:"Retry",buttonIcon:o.p}),s(1)))}),[g]),Object(d.jsxs)("div",{className:"w-full bg-secondary flex flex-col space-y-2 justify-center items-center p-4 rounded-b-2xl",children:[Object(d.jsx)("div",{className:"flex justify-center items-center felx-grow",children:Object(d.jsx)("h1",{className:"text-2xl font-bold md:text-3xl md:font-extrabold text-primary",children:"Join a Time Capsule"})}),0===c&&Object(d.jsx)(Be,{handleJoin:function(e){h(B({capsuleKey:e}))}}),1===c&&Object(d.jsx)(He,{message:u.message,buttonMessage:u.buttonMessage,buttonIcon:u.buttonIcon,handleFeedbackOnClick:function(){"rejected"===g?(s(0),x(null)):"fulfilled"===g&&O.push("/dashboard")}})]})};var Xe=function(){var e=Object(l.i)().key,t=Object(i.c)(ee),c=Object(i.c)(te),s=(Object(i.c)(ce),Object(i.c)(Ae)),n=Object(i.c)(Le),a=(Object(i.c)(Ee),Object(i.c)(pe)),o=Object(i.c)(me),u=(Object(i.c)(he),Object(i.c)(J),o.filter((function(t){return a[t].key===e}))),x=c.filter((function(e){return t[e].capsuleId===parseInt(u[0])})),f=n.filter((function(e){return s[e]})),j=Object(i.b)();return Object(r.useEffect)((function(){0!==u.length&&(j(H({capsuleKey:a[u[0]].key})),j(Re({capsuleKey:a[u[0]].key})))}),[u[0]]),Object(d.jsxs)("div",{className:"bg-secondary h-full w-full flex items-center justify-center rounded-b-2xl p-6",children:[x.length>0&&f.length>0&&Object(d.jsx)(qe,{members:x.map((function(e){return t[e]})),resources:f.map((function(e){return s[e]}))}),!(x.length>0&&f.length>0)&&Object(d.jsx)("div",{className:"flex flex-col h-64 items-center justify-center rounded-b-2xl bg-secondary",children:Object(d.jsx)("div",{className:"flex items-center justify-center",children:Object(d.jsx)("p",{className:"flex-grow font-bold text-primary",children:"Not found."})})})]})};var Ze=function(){var e="/home",t="/auth",c="/dashboard",s="/create",n="/edit",u="/view",x="/join",j="/logout",b=Object(i.b)(),m=Object(i.c)(I),p=Object(i.c)(T);Object(r.useEffect)((function(){m.access_token?b(K()):b(S())}),[m.access_token]);var h=Object(i.c)(pe),O=Object(i.c)(me),g=Object(i.c)(he);return Object(r.useEffect)((function(){!O.length&&m.access_token&&"pending"!==g&&b(de())}),[h,m.access_token]),"pending"===p?Object(d.jsx)("div",{className:"font-mono min-h-screen flex items-center justify-center bg-primary text-secondary",children:Object(d.jsx)("p",{children:"Loading..."})}):Object(d.jsx)(a.a,{children:Object(d.jsx)("div",{className:"bg-primary min-h-screen p-6 font-mono",children:Object(d.jsxs)("div",{className:"md:w-5/6 m-auto",children:[Object(d.jsx)("div",{className:"h-16 md:h-20 bg-red-100",children:Object(d.jsx)(W,{items:[{image:"/logo.png",title:"Time Capsulator",link:e,authState:0},{image:"/logo.png",title:"Dashboard",link:c,authState:1},{icon:o.q,title:"Login",link:t,authState:0},{icon:o.o,title:"Create",link:s,authState:1},{icon:o.u,title:"Join",link:x,authState:1},{icon:o.r,title:"Logout",link:j,authState:1}]})}),Object(d.jsx)("div",{className:"rounded-b-2xl h-full",children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"".concat(t),component:E}),Object(d.jsx)(P,{exact:!0,path:"".concat(e),component:f,redirection:"".concat(c),authRequired:!1}),Object(d.jsx)(P,{path:"".concat(c),component:Ne,redirection:"".concat(t)}),Object(d.jsx)(P,{path:"".concat(j),component:ke,redirection:"".concat(t)}),Object(d.jsx)(P,{path:"".concat(s),component:Ie,redirection:"".concat(t)}),Object(d.jsx)(P,{path:"".concat(n,"/:id"),component:Ye,redirection:"".concat(t)}),Object(d.jsx)(P,{path:"".concat(u,"/:key"),component:Xe,redirection:"".concat(t)}),Object(d.jsx)(P,{path:"".concat(x),component:Qe,redirection:"".concat(t)}),Object(d.jsx)(l.a,{to:"".concat(e)})]})})]})})})},$e=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,80)).then((function(t){var c=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,a=t.getTTFB;c(e),r(e),s(e),n(e),a(e)}))},et=Object(y.a)({reducer:{capsules:ye,auth:_,profile:G,members:le,resources:ze}});n.a.render(Object(d.jsx)(i.a,{store:et,children:Object(d.jsx)(Ze,{})}),document.getElementById("root")),$e()}},[[79,1,2]]]);
//# sourceMappingURL=main.b8e72b19.chunk.js.map