{"version":3,"sources":["components/LandingPage.js","api/axios.js","api/endpoints.js","store/authSlice.js","components/Navbar.js","components/AuthPage.js","components/ProtectedRoute.js","store/profileSlice.js","formatters/membersFormatter.js","store/membersSlice.js","formatters/capsulesFormatter.js","store/capsulesSlice.js","components/DashboardPage.js","components/Logout.js","components/Create.js","formatters/resourcesFormatter.js","store/resourcesSlice.js","components/EditCapsule.js","components/JoinCapsule.js","components/ViewCapsule.js","App.js","reportWebVitals.js","store/config.js","index.js"],"names":["LandingPage","history","useHistory","className","onClick","push","icon","faUser","instance","axios","create","baseURL","endpoints","auth","capsules","profile","member","resource","authenticate","createAsyncThunk","thunkAPI","a","code","url","method","data","response","status","access_token","key","localStorage","setItem","rejectWithValue","loadToken","_","getItem","authSlice","createSlice","name","initialState","user","error","reducers","setToken","state","action","payload","logout","removeItem","window","location","href","extraReducers","pending","fulfilled","rejected","selectUser","selectAuthStatus","actions","resetToken","NavbarItem","image","title","activeTab","changeActiveTab","link","classname","includes","to","src","Navbar","items","useState","setActiveTab","useSelector","useLocation","isAuthorized","item","authState","useEffect","filter","pathname","length","map","indexOf","AuthPage","dispatch","useDispatch","referrer","clientId","render","props","disabled","faGoogle","accessType","onSuccess","tokenId","onFailure","cookiePolicy","ProtectedRoute","path","redirection","Component","component","authRequired","fetchProfile","getState","headers","profileSlice","entity","selectProfile","changeTab","formatManyMembers","members","allMembers","i","id","userId","capsuleId","capsule","resourceId","userName","user_name","profilePicture","profile_picture","joinCapsule","capsuleKey","addCapsuleMember","memberId","fetchCapsuleMembers","updateMemberState","updateMemberStatus","memberAdapter","createEntityAdapter","selectId","membersSlice","getInitialState","addMember","addOne","updateMember","updateOne","setMembers","setAll","addMembers","addMany","upsertOne","selectMembers","entities","selectMembersIds","ids","selectMembersStatus","selectMembersError","setMember","formatOneCapsule","is_public","creation_date","locking_date","unlocking_date","isPublic","creationDate","lockingDate","unlockingDate","formatManyCapsules","allCapsules","fetchCapsules","createCapsule","public","lockCapsule","capsuleAdapter","capsulesSlice","addCapsule","updateCapsule","setCapsules","addCapsules","selectCapsulesIds","selectCapsules","selectCapsulesStatus","CapsuleDetailsModal","unlockDate","creators","toggleModal","creator","Capsule","countdown","handleLock","handleUnlock","faEdit","faLock","faLockOpen","Dashboard","modalIsActive","setModalIsActive","modalCapsuleId","setModalCapsuleId","membersIds","capsulesIds","capsulesStatus","calculateTime","time","setTime","isActive","capsuleMembersIds","userMembersIds","getMemberId","timerObject","delta","Date","parse","now","formatted","days","Math","floor","toString","padStart","hours","minutes","seconds","timer","setTimeout","clearTimeout","faExclamation","Logout","CreationVerificationModal","capsuleURL","capsuleMember","copied","setCopied","type","navigator","clipboard","writeText","faCopy","Create","publicButton","setPublicButton","setName","setUnlockingDate","emptySubmission","setEmptySubmission","created","setCreated","modalCapsule","setModalCapsule","modalIsReady","setModalIsReady","createdCapsule","onChange","e","target","value","formatManyResources","resources","allResource","message","images","content","fetchResource","fetchCapsuleResources","params","uploadResource","formData","FormData","append","changes","updateResource","resourceAdapter","resourcesSlice","addResource","setResources","addResources","selectResources","selectResourcesIds","selectResourcesStatus","setResource","ImageModal","currentImage","setCurrentImage","handleChangeImage","amount","faChevronLeft","faTimes","faChevronRight","Accordion","collapse","setCollapse","faAngleRight","faAngleUp","children","Requests","requestingMembers","handleRequestAction","loading","faCheck","OtherMembers","MemberHeader","toggle","setToggle","MemberBody","setToggleModal","modalImage","setModalImage","parseInt","LockVerificationModal","header","body","buttons","button","buttonsFunctions","Edit","setMessage","renderImages","setRenderImages","uploadImages","setUploadImages","toggleImagesModal","setToggleImagesModal","toggleVerificationModal","setToggleVerificationModal","modalInitImage","setModalInitImage","disableSubmit","setDisableSubmit","disableReady","setDisableReady","disableLock","setDisableLock","handleFormValidation","handleToggleVerificationModal","undefined","allReady","capsuleMembers","faCommentDots","faFile","files","Array","from","file","URL","createObjectURL","concat","revokeObjectURL","multiple","handleRenderImageClick","handleSubmit","faCheckDouble","handleReady","isAdmin","EditCapsule","notFound","setNotFound","setIsAdmin","setRequestingMembers","useParams","membersStatus","resourcesIds","memberCapsule","capsuleResources","memberResource","resourceExists","newStatus","requestingMemberId","isApproved","Join","handleJoin","setKey","Feedback","buttonMessage","buttonIcon","handleFeedbackOnClick","JoinCapsule","toggleFeedback","setToggleFeedback","feedbackData","setFeedbackData","statusUpdated","setStatusUpdated","membersError","faArrowLeft","faRedo","ViewCapsule","App","routes","authStatus","faSignInAlt","faPlusCircle","faUserPlus","faSignOutAlt","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","store","configureStore","reducer","capsulesReducer","authReducer","profileReducer","membersReducer","resourcesReducer","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b8e72b19.chunk.js","sourcesContent":["import { faUser } from \"@fortawesome/free-solid-svg-icons\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { useHistory } from \"react-router\"\n\nfunction LandingPage() {\n\n    const history = useHistory()\n    function handleSignup(){\n        history.push(\"/auth\")\n    }\n\n    return (\n        <div className=\"flex flex-col space-y-6\">\n            {/* About TimeCapsulator */}\n            <div className=\"flex flex-col justify-center items-center bg-secondary rounded-b-2xl p-4\">\n                <div className=\"flex justify-center items-center felx-grow\">    \n                    <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-primary\">Time Capsulator</h1>\n                </div>\n\n                <div className=\"flex justify-center items-center felx-grow\">    \n                    <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl text-center \">\n                        You're taking a sip from your favourite drink on a beautiful weekend evening. While swiming in an ocean of thoughts,\n                        you remember a precious memory from a few years ago, and... you just smile and continue with your beautiful evening.\n                        That's what Time Capsulator is all about. You put some precious memories here to be reminded of them once they're forgotten! \n                    </p>\n                </div>\n            </div>\n            {/* Features */}\n            <div className=\"flex flex-col justify-center items-center\">\n                    <div className=\"flex justify-center items-center flex-grow mb-4\">    \n                        <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-secondary \">Key Features</h1>\n                    </div>\n                    {/* dummy div to use margin in child div */}\n                    <div className=\"w-full flex-grow\">\n                        <div className=\"bg-secondary  p-2 rounded-2xl flex justify-start items-center mr-8 md:mr-32 lg:mr-48 mb-4\">\n                            <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl text-center\">\n                                Sending images and messages to your future self.\n                            </p>\n                        </div>\n                    </div>\n                    <div className=\"w-full flex-grow\">\n                        <div className=\"bg-secondary  p-2 rounded-2xl flex justify-start items-center ml-4 md:ml-16 lg:ml-24 mb-4 mr-4 md:mr-16 lg:mr-24 text-center\">\n                            <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl\">\n                            Getting an email when the capsule is open.\n                            </p>\n                        </div>\n                    </div>\n                    <div className=\"w-full flex-grow\">\n                        <div className=\"bg-secondary  p-2 rounded-2xl flex justify-start items-center ml-8 md:ml-32 lg:ml-48 mb-4 text-center\">\n                            <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl\">\n                                Making a shared Time Capsule with firends.\n                            </p>\n                        </div>\n                    </div>\n                    <div className=\"w-full flex-grow\">\n                        <div className=\"bg-secondary  p-2 rounded-2xl flex justify-start items-center ml-4 md:ml-16 lg:ml-24 mb-4 mr-4 md:mr-16 lg:mr-24 text-center\">\n                            <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl\">\n                                Hiding stuff from firends till the capsule is opened.\n                            </p>\n                        </div>\n                    </div>\n                    <div className=\"w-full flex-grow\">\n                        <div className=\"bg-secondary  p-2 rounded-2xl flex justify-start items-center mr-8 md:mr-32 lg:mr-48 text-center\">\n                            <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl\">\n                                Making time capsules public or private.\n                            </p>\n                        </div>\n                    </div>\n            </div>\n\n            {/* How To Start */}\n            <div className=\"bg-secondary flex flex-col items-center justify-center rounded-2xl space-y-2 p-4\">\n                {/* div to center text */}\n                <div className=\"flex-grow flex justify-center items-center\">    \n                    <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-primary \">How To Start</h1>\n                </div>\n                <button \n                    className=\"rounded-md bg-primary text-secondary w-40 md:w-80 h-16 flex-grow font-bold text-2xl\"\n                    onClick={handleSignup}\n                >\n                    <div className=\"h-full w-full flex items-center justify-center space-x-2\">\n                        <FontAwesomeIcon icon={faUser} />\n                        <p>\n                            Sign Up\n                        </p>\n                    </div>\n                </button>\n                <div className=\"flex-grow flex justify-center items-center\">\n                    <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl text-center\">Create an account and enjoy the app right away!</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default LandingPage\n","import axios from \"axios\"\n\nexport const instance = axios.create({\n    baseURL: \"http://localhost:8000\"\n})\n","const endpoints = {\n    auth: \"/api/authenticate/\",\n    capsules: \"/api/capsule/\",\n    profile: \"/api/profile/\",\n    member: \"/api/member/\",\n    resource: \"/api/resource/\"\n\n}\n\nexport default endpoints","import {createSlice, createAsyncThunk} from '@reduxjs/toolkit'\n\nimport {instance as axios} from \"../api/axios\"\nimport endpoints from \"../api/endpoints\"\n\nconst initialState = {\n    user: {},\n    status: 'pending', // pending, fulfilled, rejected\n    error: null\n}\n\nexport const authenticate = createAsyncThunk(\n    'auth/authenticate',\n    async({ code }, thunkAPI) => {\n        try {\n            // Authenticate\n            const response = await axios({\n                url: endpoints.auth,\n                method: 'POST',\n                data:\n                {\n                    code: code,\n                },\n            });\n            if (response.status === 200){\n                // TODO: Add formatter\n                const access_token = response.data.key\n\n                localStorage.setItem(\"access_token\", access_token)\n                \n                return {access_token: response.data.key}\n            }\n            else\n                return thunkAPI.rejectWithValue(response.data)\n        } \n        catch (e) {\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n        }\n    }\n)\n\nexport const loadToken = createAsyncThunk(\n    'auth/loadToken',\n    async (_, thunkAPI) => {\n        const access_token = localStorage.getItem(\"access_token\")\n        if (access_token)\n            return access_token\n    }\n)\n\nexport const authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    reducers: {\n        setToken: (state, action) => {\n            state.user.access_token = action.payload \n        },\n        logout: (state) => {\n            localStorage.removeItem(\"access_token\")\n            window.location.href=\"/home\"\n        }\n    },\n    extraReducers: {\n        [authenticate.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [authenticate.fulfilled]: (state, {payload}) => {\n            state.status = 'fulfilled'\n            state.user = payload\n            \n        },\n        [authenticate.rejected]: (state, {payload}) => {\n            state.status = 'rejected'\n            state.error = payload\n        },\n        \n        [loadToken.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [loadToken.fulfilled]: (state, {payload}) => {\n            state.status = 'fulfilled'\n            state.user.access_token = payload\n            \n        },\n        [loadToken.rejected]: (state, {payload}) => {\n            state.status = 'rejected'\n        },\n        \n\n    }\n})\n\nexport const selectUser = (state) => state.auth.user\n\nexport const selectAuthStatus = (state) => state.auth.status\n\nexport const {setToken, resetToken, logout} = authSlice.actions\n\nexport default authSlice.reducer;","import {useEffect, useState} from 'react'\nimport {Link, useHistory, useLocation} from \"react-router-dom\";\nimport {useSelector} from 'react-redux'\nimport classname from 'classnames'\n\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\n\nimport { selectUser } from '../store/authSlice';\n\nfunction NavbarItem({image, title, activeTab, changeActiveTab, link, icon}){\n  return (\n    <Link \n      className={\n        classname(\n          \"h-full lg:w-80 bg-gray-500 flex-grow w-full flex items-center justify-center rounded-t-xl\", \n          {\n            \"text-secondary\": !(activeTab.includes(link)),\n            \"text-primary bg-secondary\": activeTab.includes(link)\n        })\n      }\n      to={`${link}`}\n      onClick={() => changeActiveTab(link)}\n    >\n      <div className=\"h-full w-full\" >\n        {image && <img src={`${image}`} title={`${title}`} className=\"h-full w-full object-contain animate-scale\"/> }\n        {icon && \n        <div className=\"w-full h-full flex flex-col items-center justify-center text-lg md:text-2xl\">\n          <FontAwesomeIcon icon={icon}/>\n          <p>{title}</p>\n        </div>}\n      </div>\n    </Link>\n  )\n}\n\nfunction Navbar({items}) {\n  /*\n  The Navbar will highlight items based on\n  - The link is in the current path (e.g. link: dashboard/, path dashboard/bingus/)\n  - The previous highlighted path (for non-navbar link)\n  - The final fallback: Dashboard's path\n  */\n\n  // Choose which page is active right now\n  const [activeTab, setActiveTab] = useState(null)\n\n  // Needed for choosing wheather we're keeping or ditching the tab \n  const user = useSelector(selectUser)\n\n  const location = useLocation()\n\n  useEffect(() => {\n    // Set the active tab if the current url is in the item's list of links (preserve previous state)\n    if (items.filter(item => isAuthorized(item) && location.pathname.includes(item.link)).length > 0){\n      setActiveTab(location.pathname)\n    }\n    else {\n      // Fallback to 'Dashboard'\n      setActiveTab('/dashboard')\n    }\n    }, [location.pathname])\n\n  function isAuthorized(item){\n    // Check if the tab can appear on the current user's auth state (some tabs are disabled for authed users others appears for both auth and unauth)\n    //      A+B                                                         AB + A'B' \n    if (item.authState === 2 || (user.access_token && item.authState === 1 || !user.access_token && item.authState === 0)){\n      return true\n    }\n    return false\n  }\n\n  function changeActiveTab(link){\n    // preserve previous state\n    if (activeTab.includes(link)){\n      setActiveTab(link)\n    }\n  }\n  \n  return (\n    <nav className=\"h-full w-full\">\n        <div className=\"flex w-full flex-grow overflow-hidden h-full relative\">\n          \n          {activeTab &&\n            items.map(item => {\n              if (isAuthorized(item))\n                  return <NavbarItem\n                  image={item.image}\n                  icon={item.icon}\n                  title={item.title}\n                  activeTab={activeTab}\n                  changeActiveTab={changeActiveTab}\n                  link={item.link}\n                  key={items.indexOf(item)}\n                  />\n                })\n          }\n\n        </div>\n      </nav>\n  )\n}\n\nexport default Navbar\n","import {useDispatch, useSelector} from 'react-redux'\nimport GoogleLogin from 'react-google-login'\n\nimport {authenticate, selectUser} from '../store/authSlice'\nimport { Redirect, useHistory } from 'react-router'\nimport { useEffect } from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { fab, faGoogle } from '@fortawesome/free-brands-svg-icons'\n\nfunction AuthPage() {\n\n    const dispatch = useDispatch()\n\n    const history = useHistory()\n    \n    const user = useSelector(selectUser)\n\n    useEffect(() => {\n        // Do this after the authentication dispatch\n        // NOTE: This won't work if the user changed directory before login is done\n\n        if (user.access_token){\n            if (history.location.state){\n                history.push(history.location.state.referrer)\n            } else {\n                history.push(\"/dashboard\")\n            }\n        }\n    }, [user])\n\n\n    function loginSuccess(response){\n        dispatch(authenticate({\n            code: response.tokenId\n        }))\n    }\n\n    function loginFailure(response){\n    }\n\n    return (\n        <div className=\"flex flex-col space-y-2 bg-secondary items-center justify-center sm:min-h-0 rounded-b-2xl p-4\">\n            <div className=\"flex-grow flex justify-center items-center\">    \n                <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-primary \">Sign Up - Login</h1>\n            </div>\n            <div className=\"flex-grow w-full h-16\">\n                <GoogleLogin \n                    clientId=\"354605905259-6ip0oar2l4prc4pg7fbktcu0771ibqm5.apps.googleusercontent.com\"\n                    render={props => (\n                        <button \n                            onClick={props.onClick} \n                            disabled={props.disabled} \n                            className=\"rounded-md bg-primary text-secondary min-w-full min-h-full font-bold text-2xl h-16\"\n                        >\n                            <div className=\"h-full w-full flex items-center justify-center space-x-2\">\n                                <p>\n                                    With <FontAwesomeIcon icon={faGoogle}/>oogle\n                                </p>\n                            </div>\n                        </button>\n                    )}\n                    accessType=\"offline\"\n                    onSuccess={loginSuccess}\n                    onFailure={loginFailure} \n                    cookiePolicy={'single_host_origin'}\n\n                />\n            </div>\n\n            <div className=\"flex-grow flex justify-center items-center\">\n                <p className=\"text-primary text-xs font-semibold md:text-sm text-center\">\n                    Make sure that you use a google account that you'll likely be using for a few more years because the Time Capsule notification emails will be sent there.\n                </p>\n            </div>\n        </div>\n    )\n}\n\nexport default AuthPage\n","import { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport {Route, Redirect, useHistory} from 'react-router-dom'\n\nimport {selectUser} from '../store/authSlice'\n\nfunction ProtectedRoute({path, redirection, component: Component, authRequired=true}) {\n    const user = useSelector(selectUser) \n    const history = useHistory()\n    return (\n        <Route path={path} render={() => {\n            // Got this from the truth table \n            if ((user.access_token && authRequired) ||  // For protect auth\n                !user.access_token && !authRequired     // For protected unauth\n            ){\n                return <Component />\n            }\n            else {\n                return <Redirect to={\n                    {\n                        pathname: redirection,\n                        state: {referrer: history.location.pathname}\n                    }\n                }/>\n                \n            }\n        }}/>\n        \n    )\n}\n\nexport default ProtectedRoute\n","import {createSlice, createAsyncThunk} from '@reduxjs/toolkit'\n\nimport { selectUser } from './authSlice';\nimport {instance as axios} from \"../api/axios\"\nimport endpoints from '../api/endpoints'\n\nexport const fetchProfile = createAsyncThunk(\n    'profile/fetchProfile',\n    async(_, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n\n            const response = await axios({\n                url: endpoints.profile,\n                method: 'GET',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`\n                },\n            });\n            if (response.status === 200){\n                return response.data\n            }\n            else\n                return thunkAPI.rejectWithValue(response.data)\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n        }\n    }\n)\n\n\n\nconst initialState = {\n    entity: {},\n    status: 'pending',\n    error: null\n}\n\nexport const profileSlice = createSlice({\n    name: 'profile',\n    initialState,\n    reducers: {\n        \n    },\n    extraReducers: {\n        [fetchProfile.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [fetchProfile.fulfilled]: (state, {payload}) => {\n            state.status = 'fulfilled'\n            state.entity = payload\n            \n        },\n        [fetchProfile.rejected]: (state, {payload}) => {\n            state.status = 'rejected'\n            state.error = payload\n        },\n    }\n})\n\n\nexport const selectProfile = (state) => state.profile.entity\nexport const selectProfileStatus = (state) => state.profile.status\nexport const selectProfileError = (state) => state.profile.error\n\n\nexport const {changeTab} = profileSlice.actions\n\nexport default profileSlice.reducer;","export const formatOneMember = ({\n    // Normalizing a single capsule\n        id,\n        user, \n        capsule, \n        resource,\n        state, \n        status, \n        user_name, \n        profile_picture,\n    }) => {\n    return {\n        id,\n        userId: user, \n        capsuleId: capsule, \n        resourceId: resource,\n        state, \n        status, \n        userName: user_name,\n        profilePicture: profile_picture,\n    }\n}\n\nexport const formatManyMembers = (members) => {\n    // Normalizing many members\n\n    let allMembers = []\n    for (var i=0; i<members.length; i++){\n        \n        // Normalize the member \n        const member = formatOneMember(members[i])\n\n        // Update the normalized lists\n        allMembers.push(member)\n    }\n    return allMembers\n}\n","import {createSlice, createAsyncThunk, createEntityAdapter} from '@reduxjs/toolkit'\n\nimport { selectUser } from './authSlice';\nimport {instance as axios} from \"../api/axios\"\nimport endpoints from '../api/endpoints'\nimport { selectProfile } from './profileSlice';\nimport { addCapsuleMember } from './capsulesSlice';\nimport {formatManyMembers} from \"../formatters/membersFormatter\"\n\nexport const joinCapsule = createAsyncThunk(\n    'member/joinCapsule',\n    async ({capsuleKey}, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n            const profile = selectProfile(thunkAPI.getState())\n\n            const response = await axios({\n                url: endpoints.member,\n                method: 'POST',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`\n                },\n                data: {\n                    user: profile.id,\n                    key: capsuleKey,\n                }\n            });\n            if (response.status === 201){\n                // TODO: Update the capsule\n                \n                // If it's a member or an admin (meaning the capsule is already created)\n                if (response.data.state === \"M\" || response.data.state === \"A\"){\n                    thunkAPI.dispatch(addCapsuleMember({\n                        memberId: response.data.id,\n                        capsuleId: response.data.capsule\n                    }))\n                }\n\n                const members = formatManyMembers([response.data])\n                return members[0]\n            }\n            else\n                return thunkAPI.rejectWithValue(response.data)\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n        }\n    }\n)\n\nexport const fetchCapsuleMembers = createAsyncThunk(\n    'members/fetchCapsuleMembers',\n    async({capsuleKey}, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n            const profile = selectProfile(thunkAPI.getState())\n\n            const response = await axios({\n                url: `${endpoints.capsules}${capsuleKey}/`,\n                method: 'GET',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`\n                },\n            });\n            if (response.status === 200){\n                const members = formatManyMembers(response.data)\n                return members\n            }\n            else\n                return thunkAPI.rejectWithValue(response.data)\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n        }\n    }\n)\n\nexport const updateMemberState = createAsyncThunk(\n    'members/updateMemberState',\n    async ({memberId, state}, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n            const profile = selectProfile(thunkAPI.getState())\n\n            const response = await axios({\n                url: `${endpoints.member}${memberId}/`,\n                method: 'PUT',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`\n                },\n                data: {\n                    state: state\n                }\n            });\n            if (response.status === 200){\n                const members = formatManyMembers([response.data])\n                return members[0]\n            }\n            else\n                return thunkAPI.rejectWithValue(response.data)\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n        }\n    }\n)\n\nexport const updateMemberStatus = createAsyncThunk(\n    'members/updateMemberStatus',\n    async ({memberId, status}, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n            const profile = selectProfile(thunkAPI.getState())\n\n            const response = await axios({\n                url: `${endpoints.member}${memberId}/`,\n                method: 'PUT',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`\n                },\n                data: {\n                    status: status\n                }\n            });\n            if (response.status === 200){\n                const members = formatManyMembers([response.data])\n                return members[0]\n            }\n            else\n                return thunkAPI.rejectWithValue(response.data)\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n        }\n    }\n)\n\nexport const memberAdapter = createEntityAdapter({\n    selectId: (member) => member.id\n})\n\nexport const membersSlice = createSlice({\n    name: 'members',\n    initialState: memberAdapter.getInitialState({\n        status: 'fulfilled',\n        error: null\n    }),\n    reducers: {\n        addMember: memberAdapter.addOne,\n        updateMember: memberAdapter.updateOne,\n        setMembers: memberAdapter.setAll,\n        addMembers: memberAdapter.addMany\n    },\n    extraReducers: {\n        [joinCapsule.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [joinCapsule.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            memberAdapter.addOne(state, action.payload)\n            \n            \n        },\n        [joinCapsule.rejected]: (state, action) => {\n            state.status = 'rejected'\n\n            state.error = action.payload\n        },\n        [fetchCapsuleMembers.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [fetchCapsuleMembers.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            memberAdapter.addMany(state, action.payload)\n            \n            \n        },\n        [fetchCapsuleMembers.rejected]: (state, action) => {\n            state.status = 'rejected'\n\n            state.error = action.payload\n        },\n        [updateMemberState.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [updateMemberState.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            memberAdapter.upsertOne(state, action.payload)\n            \n            \n        },\n        [updateMemberState.rejected]: (state, action) => {\n            state.status = 'rejected'\n\n            state.error = action.payload\n        },\n        [updateMemberStatus.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [updateMemberStatus.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            memberAdapter.upsertOne(state, action.payload)\n            \n            \n        },\n        [updateMemberStatus.rejected]: (state, action) => {\n            state.status = 'rejected'\n\n            state.error = action.payload\n        },\n    }\n})\n\nexport const selectMembers = (state) => state.members.entities\nexport const selectMembersIds = (state) => state.members.ids\nexport const selectMembersStatus = (state) => state.members.status\nexport const selectMembersError = (state) => state.members.error\n\n\nexport const {addMember, addMembers, setMember, setMembers, updateMember} = membersSlice.actions\n\nexport default membersSlice.reducer;","\nexport const formatOneCapsule = ({\n    // Normalizing a single capsule\n        id,\n        key, \n        name, \n        state, \n        is_public, \n        creation_date, \n        locking_date,\n        unlocking_date,\n        members\n    }) => {\n    return {\n        capsule: {\n            id,\n            key, \n            name, \n            state, \n            isPublic: is_public, \n            creationDate: creation_date, \n            lockingDate: locking_date,\n            unlockingDate: unlocking_date,\n            members: members.map(member => member.id)\n        },\n        members: [...members]\n            \n    }\n}\n\nexport const formatManyCapsules = (capsules) => {\n    // Normalizing many capsules\n\n    let allCapsules = []\n    let allMembers = []\n    for (var i=0; i<capsules.length; i++){\n        \n        // Normalize the capsule \n        const {capsule, members} = formatOneCapsule(capsules[i])\n\n        // Update the normalized lists\n        allCapsules.push(capsule)\n        allMembers = [...allMembers, ...members]\n    }\n    return {capsules: allCapsules, members: allMembers}\n}\n","import {createSlice, createAsyncThunk, createEntityAdapter} from '@reduxjs/toolkit'\nimport { useSelector } from 'react-redux';\n\nimport { selectUser } from './authSlice';\nimport { instance as axios } from '../api/axios'\nimport endpoints from '../api/endpoints'\nimport {joinCapsule, setMembers} from './membersSlice'\nimport {formatManyCapsules, formatOneCapsule} from '../formatters/capsulesFormatter'\nimport { formatManyMembers } from '../formatters/membersFormatter';\n\n\nexport const fetchCapsules = createAsyncThunk(\n    'capsules/fetchCapsules',\n    async(_, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n\n            const response = await axios({\n                url: endpoints.capsules,\n                method: 'GET',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`\n                },\n            });\n            if (response.status === 200){\n                // Normalized data\n                const {capsules, members} = formatManyCapsules(response.data)\n                \n                // Update the members\n                thunkAPI.dispatch(setMembers(formatManyMembers(members)))\n\n                return capsules\n            }\n            else\n                return thunkAPI.rejectWithValue(response.data)\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n        }\n    }\n)\n\nexport const createCapsule = createAsyncThunk(\n    'capsules/createCapsule',\n    async (data, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n\n            const response = await axios({\n                url: endpoints.capsules,\n                method: 'POST',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`\n                },\n                data: {\n                    name: data.name,\n                    unlocking_date: `${data.unlockingDate}T00:00`,  // Reformat\n                    member: data.member,\n                    is_public: data.public\n                }\n            });\n            if (response.status === 201){\n                thunkAPI.dispatch(joinCapsule({capsuleId: response.data.id, capsuleKey: response.data.key}))\n                const {capsule, members} = formatOneCapsule(response.data)\n                return capsule\n            }\n            else\n                return thunkAPI.rejectWithValue(response.data)\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n        }\n    }\n)\n\nexport const lockCapsule = createAsyncThunk(\n    'capsules/lockCapsule',\n    async ({capsuleKey}, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n\n            const response = await axios({\n                url: `${endpoints.capsules}${capsuleKey}/`,\n                method: 'PUT',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`\n                },\n                data: {\n                    state: 1\n                }\n            });\n            if (response.status === 200){\n                const {capsule, members} = formatOneCapsule(response.data)\n                return capsule\n            }\n            else\n                return thunkAPI.rejectWithValue(response.data)\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n        }\n    }\n)\n\nconst capsuleAdapter = createEntityAdapter({\n    selectId: (capsule) => capsule.id\n})\n\nexport const capsulesSlice = createSlice({\n    name: 'capsules',\n    initialState: capsuleAdapter.getInitialState({\n        status: 'fulfilled',\n        error: null, \n    }),\n    reducers: {\n        addCapsule: capsuleAdapter.addOne,\n        updateCapsule: capsuleAdapter.updateOne,\n        setCapsules: capsuleAdapter.setAll,\n        addCapsules: capsuleAdapter.addMany,\n        addCapsuleMember: (state, {payload}) => {\n            state.entities[payload.capsuleId].members.push(payload.memberId)\n        }\n    },\n    extraReducers: {\n        [fetchCapsules.pending]: (state, action) => {\n            state.status = 'pending'\n        },\n        [fetchCapsules.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            capsuleAdapter.addMany(state, action.payload)\n        },\n        [fetchCapsules.rejected]: (state, action) => {\n            state.status = \"rejected\"\n        },\n        [createCapsule.pending]: (state, action) => {\n            state.status = 'pending'\n        },\n        [createCapsule.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            capsuleAdapter.addOne(state, action.payload)\n        },\n        [createCapsule.rejected]: (state, action) => {\n            state.status = \"rejected\"\n            state.error = action.payload\n        },\n        [lockCapsule.pending]: (state, action) => {\n            state.status = 'pending'\n        },\n        [lockCapsule.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            capsuleAdapter.upsertOne(state, action.payload)\n        },\n        [lockCapsule.rejected]: (state, action) => {\n            state.status = \"rejected\"\n            state.error = action.payload\n        },\n    }\n}) \n\nexport const selectCapsulesIds = (state) => state.capsules.ids // Not the whole capsules\nexport const selectCapsules = (state) => state.capsules.entities // Not the whole capsules\nexport const selectCapsulesStatus = (state) => state.capsules.status // Not the whole capsules\nexport const selectCapsulesError = (state) => state.capsules.error // Not the whole capsules\n\nexport const {addCapsule, updateCapsule, setCapsules, addCapsuleMember} = capsulesSlice.actions\n\nexport default capsulesSlice.reducer","import {useEffect, useState} from 'react'\nimport {useSelector, useDispatch} from 'react-redux'\nimport classname from 'classnames'\n\nimport {selectCapsules, selectCapsulesIds, selectCapsulesStatus} from '../store/capsulesSlice'\nimport { selectMembers, selectMembersIds } from '../store/membersSlice'\nimport { Link, useHistory } from 'react-router-dom'\nimport { selectProfile } from '../store/profileSlice'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit, faExclamation, faLock, faLockOpen } from '@fortawesome/free-solid-svg-icons'\n\nfunction CapsuleDetailsModal({name, creationDate, unlockDate, creators, toggleModal}) {\n    return (\n        <div className=\"fixed inset-0 z-10 flex justify-center items-center bg-primary bg-opacity-70\">\n            {/* The Modal */}\n            <div className=\"text-secondary bg-primary w-128 h-128 rounded-2xl p-6 flex flex-col shadow-xl border-seondary border-2 m-4\"> \n                {/* Logo */}\n                <div className=\"flex-grow h-3/12 flex justify-center items-center\">\n                    <div className=\"h-full\" >\n                        <img src=\"logo.png\" className=\"h-full\"/>\n                    </div>\n                </div>\n                {/* Name */}\n                <div className=\"flex-grow h-1/12 flex justify-center items-center w-full\">\n                    <p  className=\"text-secondary text-md font-extrabold md:text-2xl text-center w-72 truncate\">{name}</p>\n                </div>\n                {/* Content */}\n                <div className=\"flex-grow h-7/12 flex flex-col justify-center items-center\">\n                    {/* Creation date */}\n                    <div className=\"flex flex-grow flex-col justify-center items-center\">\n                        <div className=\"flex-grow flex justify-center items-center \">\n                            <p className=\"text-secondary text-xs font-bold md:text-bold md:text-xl\">Creation Date:</p>\n                        </div>\n                        <div className=\"flex-grow flex justify-center items-center\">\n                            <p className=\"text-secondary text-xs font md:text-bold md:text-xl\">{creationDate}</p>\n                        </div>\n                    </div>\n                    {/* Unlock date */}\n                    <div className=\"flex flex-grow flex-col justify-center items-center\">\n                        <div className=\"flex-grow flex justify-center items-center \">\n                            <p className=\"text-secondary text-xs font-bold md:text-bold md:text-xl\">Unlock Date:</p>\n                        </div>\n                        <div className=\"flex-grow flex justify-center items-center\">\n                            <p className=\"text-secondary text-xs font md:text-bold md:text-xl\">{unlockDate}</p>\n                        </div>\n                    </div>\n                    {/* Creators */}\n                    <div className=\"h-4/6 w-full flex-grow justify-center items-center m-4 bg-secondary text-primary rounded-2xl overflow-hidden\">\n                        <div className=\"h-1/6 flex-grow flex justify-center items-center\">\n                            <p className=\"text-primary text-xs font-bold md:text-bold md:text-xl\">Creators:</p>\n                        </div>\n                        <div className=\"h-5/6 overflow-y-auto\">\n                            {\n                                creators.map(creator => {\n                                    return (\n                                        <p className=\"text-center\" key={creators.indexOf(creator)}>\n                                            {creator}\n                                        </p>\n\n                                    )})\n                            }\n                            \n                        </div>\n                    </div>\n                </div>\n                {/* Ok Button */}\n                <div className=\"flex-grow h-1/12 flex justify-center items-center\">\n                    <button className=\"bg-secondary text-primary h-full w-full rounded-2xl\" onClick={toggleModal}>Close</button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nfunction Capsule({capsule, countdown, toggleModal, handleLock, handleUnlock}) {\n    return(\n        <div className=\"flex justify-center items-center h-16 bg-primary rounded-2xl overflow-hide\">\n            {/* Logo */}\n            {/* <div className=\"h-full w-3/12 flex-grow flex items-center justify-center bg-secondary rounded-l-2xl border-2 border-primary\">\n                <div className=\"h-full flex items-center justify-center\" >\n                    <img src=\"logo.png\"/>\n                </div>\n            </div> */}\n            {/* Title + Countdown */}\n            <div className=\"flex flex-col flex-grow w-9/12 cursor-pointer\" onClick={toggleModal}>\n                {/* Title */}\n                <div className=\"flex-grow flex justify-center items-center pr-4 pl-4\">\n                    <p  className=\"text-secondary text-md font-extrabold md:text-2xl text-center truncate\">{capsule.name}</p>\n                </div>\n                {/* Countdown */}\n                <div className=\"flex-grow flex justify-center items-center\">\n                    <p className=\"text-secondary text-xs font-semibold md:text-bold md:text-xl\">{countdown}</p>\n                </div>\n            </div >\n            {/* Lock/Unlock button */}\n            <div className=\"flex-grow flex justify-center items-center h-full w-3/12 bg-secondary rounded-r-2xl border-2 border-primary\">\n                <button \n                    className={classname(\"text-primary text-xs font-semibold md:text-bold md:text-xl w-full h-full outline-none\", {\"opacity-50 cursor-not-allowed\": capsule.state === 1})}\n                    onClick={() => {\n                        if (capsule.state === 0) {\n                            handleLock(capsule)\n                        } else if (capsule.state === 2) {\n                            handleUnlock(capsule)}\n                            }\n                        }\n                >\n                    {capsule.state === 0 && \n                    <div className=\"h-full w-full flex flex-col items-center justify-center space-x-1\">\n                        <FontAwesomeIcon icon={faEdit} />\n                        <p>Edit</p>\n                    </div>}\n                    {capsule.state === 1 && \n                    <div className=\"h-full w-full flex flex-col items-center justify-center space-x-1\">\n                        <FontAwesomeIcon icon={faLock} />\n                        <p>Locked</p>\n                    </div>}\n                    {capsule.state === 2 && \n                    <div className=\"h-full w-full flex flex-col items-center justify-center space-x-1\">\n                        <FontAwesomeIcon icon={faLockOpen} className={classname({\"animate-bounce\": capsule.state === 2})}/>\n                        <p>Unlock</p>\n                    </div>}\n                </button>\n            </div>\n        </div>\n    )\n}\n\nfunction Dashboard() {\n\n    const [modalIsActive, setModalIsActive] = useState(false)\n    const [modalCapsuleId, setModalCapsuleId] = useState(null)\n\n    const dispatch = useDispatch()\n    \n    const history = useHistory()\n\n    const members = useSelector(selectMembers)\n    const membersIds = useSelector(selectMembersIds)\n\n\n    const profile = useSelector(selectProfile)\n\n    const capsules = useSelector(selectCapsules)\n    const capsulesIds = useSelector(selectCapsulesIds)\n    const capsulesStatus = useSelector(selectCapsulesStatus)\n\n    const [time, setTime] = useState(calculateTime())\n\n    function toggleModal(isActive, id){\n        setModalCapsuleId(id)\n        setModalIsActive(isActive)\n    }\n\n    function getMemberId(capsuleMembersIds){\n        // Gets the current user's member id from the capsule members list \n\n        const userMembersIds = membersIds.filter((memberId) => members[memberId].userId === profile.id)\n        const memberId = capsuleMembersIds.filter((memberId) => userMembersIds.includes(memberId))[0]\n        return memberId\n    }\n\n    function handleLock(capsule){\n        if (capsule){\n            const memberId = getMemberId(capsule.members)\n            history.push(`/edit/${memberId}`)\n        }\n    }\n    \n    function handleUnlock(capsule){\n        if (capsule){\n            history.push(`/view/${capsule.key}`)\n        }\n    }\n\n    function calculateTime(){\n        var timerObject = {}\n        for (var i=0; i<capsulesIds.length; i++){\n            const unlockingDate = +Date.parse(capsules[capsulesIds[i]].unlockingDate)\n            const delta = unlockingDate - +Date.now()\n            \n            if (delta <= 0){\n                timerObject[capsulesIds[i]] = \"00D 00:00:00\"\n                continue\n            }\n\n            const formatted = {\n                days: Math.floor(delta / (1000 * 60 * 60 * 24)).toString().padStart(2, \"0\"),\n                hours: Math.floor((delta / (1000 * 60 * 60)) % 24).toString().padStart(2, \"0\"),\n                minutes: Math.floor((delta / 1000 / 60) % 60).toString().padStart(2, \"0\"),\n                seconds: Math.floor((delta / 1000) % 60).toString().padStart(2, \"0\")\n            };\n            \n            timerObject[capsulesIds[i]] = `${formatted.days}D ${formatted.hours}:${formatted.minutes}:${formatted.seconds}`\n        }\n        return timerObject\n    }\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            setTime(calculateTime());\n          }, 1000);\n        \n        return () => clearTimeout(timer);\n    }, [time])\n\n    return (\n        // dummy div for modal\n        <div className=\"w-full h-full\"> \n            {modalIsActive && modalCapsuleId !== null &&\n                <CapsuleDetailsModal \n                    toggleModal={() => toggleModal(!modalIsActive)}\n                    name={capsules[modalCapsuleId].name}\n                    creationDate={capsules[modalCapsuleId].creationDate}    \n                    unlockDate={capsules[modalCapsuleId].unlockingDate}\n                    creators={capsules[modalCapsuleId].members.map(id => members[id].userName)}    \n                />}\n            <div className=\"bg-secondary rounded-b-2xl p-4 space-y-2\">\n                <div className=\"flex justify-center items-center felx-grow\">    \n                    <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-primary text-center\">Time Capsules</h1>\n                </div>\n                {capsulesStatus === 'pending' && !capsules &&\n                    <p>Loading</p>\n                }\n                {capsules && capsulesIds.map(capsule => {\n                    return (\n                        <Capsule \n                            key={capsules[capsule].id} \n                            capsule={capsules[capsule]} \n                            handleLock={handleLock}\n                            handleUnlock={handleUnlock}\n                            countdown={time[capsule]} toggleModal={() => toggleModal(!modalIsActive, capsules[capsule].id)\n                        }/>\n                )})\n                }\n                {capsulesIds.length === 0 && \n                    <div className=\"h-full w-full flex items-center justify-center space-x-2 text-lg text-primary\">\n                        <p className=\"font-bold\">\n                            None\n                        </p>\n                        <FontAwesomeIcon icon={faExclamation} />\n                    </div>\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default Dashboard\n","import { useDispatch } from \"react-redux\"\nimport { useHistory } from \"react-router\"\nimport { logout } from \"../store/authSlice\"\n\nexport default function Logout() {\n    \n    const history = useHistory()\n\n    const dispatch = useDispatch()\n\n    function handleLogout(){\n        dispatch(logout())\n    }\n    \n    return (\n        <div className=\"flex flex-col bg-secondary items-center justify-center sm:min-h-0 rounded-b-2xl p-4\">\n            <button \n                className=\"rounded-md bg-primary text-secondary h-16 w-48 font-bold text-2xl\"\n                onClick={() => handleLogout()}    \n            >Logout</button>\n        </div>\n    )\n}\n","import { useEffect, useState } from \"react\"\nimport classname from 'classnames'\nimport { useDispatch, useSelector } from \"react-redux\"\n\nimport { createCapsule, selectCapsules, selectCapsulesStatus, selectCapsulesIds } from \"../store/capsulesSlice\"\nimport { fetchProfile, selectProfile } from \"../store/profileSlice\"\nimport { useHistory } from \"react-router\"\nimport { faCopy } from \"@fortawesome/free-solid-svg-icons\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\n\nfunction CreationVerificationModal({capsuleURL, capsuleMember}) {\n    const [copied, setCopied] = useState(\"Copy\")\n    const history = useHistory()\n\n    function handleRedirect(){\n        history.push(`/edit/${capsuleMember}`)\n    }\n\n    return (\n        <div className=\"fixed inset-0 z-10 flex justify-center items-center bg-primary bg-opacity-70 p-4\">\n            {/* The Modal */}\n            <div className=\"text-secondary bg-primary w-128 h-72 rounded-2xl p-6 flex flex-col shadow-xl border-seondary border-2 space-y-2\"> \n                {/* Success Message */}\n                <div className=\"flex justify-center items-center felx-grow\">    \n                {/* Add icon here */}\n                    <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-secondary text-center\">Your Time Capsule is ready!</h1>\n                </div>\n                <div className=\"flex-grow flex justify-center items-end\">\n                    <p className=\"text-secondary text-xs md:text-lg\">Share memories with friends:</p>\n                </div>\n                {/* Share Link */}\n                <div className=\"flex justify-center items-center flex-grow \">\n                    <div className=\"text-secondary text-sm font-bold md:text-bold md:text-xl flex flex-grow justify-center items-center rounded-l-2xl h-16 w-5/6 border-secondary border-2 rounder-l-2xl overflow-hidden\">\n                        <div className=\"overflow-x-auto h-full flex items-center justify-center\">\n\n                            <p className=\"w-full whitespace-pre select-all\">{capsuleURL}</p>\n                        </div>\n                    </div>\n                    <button \n                        className=\"bg-secondary text-primary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-1/6 h-16 rounded-r-2xl\" \n                        type=\"text\"\n                        onClick={() => {navigator.clipboard.writeText(capsuleURL); setCopied(\"Done!\");}}\n                    >\n                        <div className=\"h-full w-full flex flex-col items-center justify-center space-x-1\">\n                            <FontAwesomeIcon icon={faCopy} />\n                            <p>{copied}</p>\n                        </div>\n                    </button>\n                </div>\n\n                {/* Redirection button */}\n                <div className=\"flex justify-center items-center flex-grow\">\n                    <button \n                        className=\"bg-secondary text-primary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-full h-16 rounded-2xl \" \n                        type=\"text\"\n                        onClick={handleRedirect}\n                    >\n                        Continue\n                    </button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nfunction Create() {\n    const [shareButton, setShareButton] = useState(0)\n    const [publicButton, setPublicButton] = useState(0)\n    const [name, setName] = useState(\"\")\n    const [unlockingDate, setUnlockingDate] = useState(\"\")\n    const [emptySubmission, setEmptySubmission] = useState(false)\n    const [validUnlockingDate, setValidUnlockingDate] = useState(true)\n    \n    const [created, setCreated] = useState(0)\n    \n    const [modalCapsule, setModalCapsule] = useState(null)\n    const [modalIsReady, setModalIsReady] = useState(false)\n\n    const capsules = useSelector(selectCapsules)\n    const capsulesIds = useSelector(selectCapsulesIds)\n    const capsulesStatus = useSelector(selectCapsulesStatus)\n\n\n    useEffect(\n        // Get the created capsule\n        () => {\n            if (capsulesStatus !== 'pending' && created){\n                // The created capsule is the last one in the ids list \n                const createdCapsule = capsules[capsulesIds[capsulesIds.length - 1]] \n                \n                // When the admin member successfully joins the created capsule\n                if (createdCapsule.members.length){\n                    const capsuleURL = `${createdCapsule.key}`;\n                    setModalCapsule({capsuleURL: capsuleURL, capsuleMember: createdCapsule.members[0]})\n                }\n\n            }\n        }, [capsules])\n\n    useEffect(() => {\n        // Render the modal\n        if (modalCapsule){\n            setModalIsReady(1)\n        }\n\n    }, [modalCapsule])\n\n    const profile = useSelector(selectProfile)\n\n    const dispatch = useDispatch()\n\n    function handleCreateCapsule(){\n        if (name && unlockingDate && profile){\n            dispatch(createCapsule({name: name, unlockingDate: unlockingDate, member: profile.id, public: publicButton}))\n            setCreated(1)\n            setEmptySubmission(false)\n            return true\n        }   \n        else {\n            setEmptySubmission(true)\n        }\n    }\n\n    function handleNameChange(e){\n        setName(e.target.value)\n    }\n\n    function handleDateChange(e){\n        // Minimum of 30 days\n        if (+Date.parse(e.target.value) > +Date.now() + 1000*60*60*24*30){\n            setUnlockingDate(e.target.value)\n        } \n        // else {\n        //     const now = new Date() \n        //     setUnlockingDate(`${now.getFullYear().toString().padStart(2, \"0\")}-${now.getMonth().toString().padStart(2, \"0\")}-${now.getDay().toString().padStart(2, \"0\")}`)\n        // }\n    }\n\n    return (\n        <div>\n            { modalIsReady && <CreationVerificationModal capsuleURL={modalCapsule.capsuleURL} capsuleMember={modalCapsule.capsuleMember}/> }\n            <div className=\"bg-secondary rounded-b-2xl p-4 \">\n                <div className=\"flex flex-col space-y-2\">\n                    {/* Create Capsule */}\n                    <div className=\"flex justify-center items-center felx-grow\">    \n                            <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-primary text-center\">Create a Time Capsule</h1>\n                    </div>\n                    {/* Choose Name */}\n                    <div className=\"flex justify-center items-center felx-grow h-16\">\n                        <div className=\"text-primary text-sm font-bold md:text-bold md:text-xl flex flex-grow justify-center items-center rounded-l-2xl h-full w-3/12 border-primary border-2 rounder-l-2xl\">\n                            <p className=\"text-center\">Name</p>\n                        </div>\n                        <input \n                            className={classname(\n                                \"bg-primary text-secondary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-9/12 h-full rounded-r-2xl pl-2\", \n                                {\n                                \"outline-primary\": emptySubmission && !name\n                                }\n                            )}\n                            \n                            type=\"text\"\n                            onChange={handleNameChange}\n                            />\n                    </div>\n                    {/* Choose unlock date */}\n                    <div className=\"flex justify-center items-center felx-grow h-16\">\n                        <div className=\"text-primary text-sm font-bold md:text-bold md:text-xl flex flex-grow justify-center items-center rounded-l-2xl h-full w-3/12 border-primary border-2 rounder-l-2xl\">\n                            <p className=\"text-center\">Unlock Date</p>\n                        </div>\n                        <input \n                            className={classname(\n                                \"bg-primary text-secondary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-9/12 h-full rounded-r-2xl pl-2\", \n                                {\n                                \"outline-primary\": emptySubmission && !unlockingDate\n                                }\n                            )}\n                            type=\"date\"\n                            value={unlockingDate}\n                            onChange={handleDateChange}\n                            />\n                    </div>\n                    <div className=\"flex-grow flex justify-center items-center\">\n                        <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl text-center\">* Minimum value is 30 days from now!</p>\n                    </div>\n                    {/* Choose share & make public */}\n                    <div className=\"flex justify-center items-start felx-grow flex-col space-y-2\">\n                        {/* <div className=\"flex-grow flex justify-center items-center\"> \n                            <button \n                                className=\"flex-grow flex justify-center items-center space-x-2\"\n                                onClick={() => setShareButton(!shareButton)}\n                                >\n        \n                                <button className={classname(\"border-2 border-primary h-6 w-6 rounded-lg\", {\"bg-primary\": shareButton, \"bg-secondary\": !shareButton})}></button>\n                                <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl\">Shareable with friends</p>\n\n                            </button>\n                        </div> */}\n\n                        <div className=\"flex-grow flex justify-center items-center\">\n                            <button className=\"flex-grow flex justify-center items-center space-x-2\"\n                                onClick={() => setPublicButton(!publicButton)} \n                                >\n                                <button className={classname(\"border-2 border-primary h-6 w-6 rounded-lg\", {\"bg-primary\": publicButton, \"bg-secondary\": !publicButton})}></button>\n                                <p className=\"text-primary text-xs font-semibold md:text-bold md:text-xl\">Viewable for public</p>\n                            </button>\n                        </div>\n                    </div>\n\n                    {/* Create Button */}\n                    <div className=\"flex flex-col flex-grow w-full items-center justify-center h-16\">\n                        <button \n                            className=\"rounded-md bg-primary text-secondary w-full h-full font-bold text-2xl\"\n                            onClick={handleCreateCapsule} \n                            >Create</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Create\n","\nexport const formatOneResource = ({\n    // Normalizing a single resource\n        id,\n        member,\n        message,\n        images \n    }) => {\n    return {\n        id,\n        memberId: member,\n        message,\n        images: images.map(image => `${image.content}`)           \n    }\n}\n\nexport const formatManyResources = (resources) => {\n    // Normalizing many resources\n\n    let allResource = []\n    for (var i=0; i<resources.length; i++){\n        \n        // Normalize the resource \n        const resource = formatOneResource(resources[i])\n\n        // Update the normalized lists\n        allResource.push(resource)\n    }\n    return {resources: allResource}\n}\n","import {createSlice, createAsyncThunk, createEntityAdapter} from '@reduxjs/toolkit'\n\nimport { selectUser } from './authSlice';\nimport {instance as axios} from \"../api/axios\"\nimport endpoints from '../api/endpoints'\nimport { selectProfile } from './profileSlice';\nimport {updateMember} from './membersSlice'\nimport {formatManyResources} from \"../formatters/resourcesFormatter\"\n\nexport const fetchResource = createAsyncThunk(\n    'resources/fetchResource',\n    async({memberId}, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n\n            const response = await axios({\n                url: `${endpoints.resource}${memberId}/`,\n                method: 'GET',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`,\n                },\n                \n            });\n            if (response.status === 200){\n                const {resources} = formatManyResources([response.data])\n                return resources[0]\n            }\n            else{\n                return thunkAPI.rejectWithValue(response.data)\n            }\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n            }\n    }\n)\n\nexport const fetchCapsuleResources = createAsyncThunk(\n    'resources/fetchCapsuleResources',\n    async({capsuleKey}, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n\n            const response = await axios({\n                url: `${endpoints.resource}`,\n                method: 'GET',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`,\n                },\n                params: {\n                    key: capsuleKey\n                }\n                \n            });\n            if (response.status === 200){\n                const {resources} = formatManyResources(response.data)\n                return resources\n            }\n            else{\n                return thunkAPI.rejectWithValue(response.data)\n            }\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n            }\n    }\n)\n\nexport const uploadResource = createAsyncThunk(\n    'resources/uploadResource',\n    async({\n        memberId,\n        message,\n        images\n    }, thunkAPI) => {\n        try{\n\n            const user = selectUser(thunkAPI.getState())\n\n            let formData = new FormData()\n\n            // Add multiple images\n            for (var i=0; i<images.length; i++){\n                formData.append('content', images[i])\n            }\n\n            formData.append('member', memberId)\n            formData.append('message', message)\n\n            const response = await axios({\n                url: endpoints.resource,\n                method: 'POST',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`,\n\n                    // Form-data post request for file upload\n                    'Content-Type': 'multipart/form-data'\n                },\n                data: formData,\n                \n            });\n            if (response.status === 201){\n                const {resources} = formatManyResources([response.data])\n                \n                // Update the member\n                thunkAPI.dispatch(updateMember(\n                    {\n                        id: resources[0].memberId, \n                        changes: {resourceId: resources[0].id}\n                    }\n                ))\n                return resources[0]\n            }\n            else{\n                return thunkAPI.rejectWithValue(response.data)\n            }\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n            }\n        }\n)\n\nexport const updateResource = createAsyncThunk(\n    'resources/updateResource',\n    async({\n        memberId,\n        message,\n        images\n    }, thunkAPI) => {\n        try{\n            const user = selectUser(thunkAPI.getState())\n\n            let formData = new FormData()\n\n            // Add multiple images\n            for (var i=0; i<images.length; i++){\n                formData.append('content', images[i])\n            }\n\n            formData.append('member', memberId)\n            formData.append('message', message)\n\n            const response = await axios({\n                url: `${endpoints.resource}${memberId}/`,\n                method: 'PUT',\n                headers: {\n                    'Authorization': `Token ${user.access_token}`,\n\n                    // Form-data post request for file upload\n                    'Content-Type': 'multipart/form-data'\n                },\n                data: formData,\n                \n            });\n            if (response.status === 200){\n                const {resources} = formatManyResources([response.data])\n                return resources[0]\n            }\n            else{\n                return thunkAPI.rejectWithValue(response.data)\n            }\n        }\n        catch (e){\n            return thunkAPI.rejectWithValue({data: e.response.data, status: e.response.status})\n            }\n        }\n)\n\nexport const resourceAdapter = createEntityAdapter({\n    selectId: (resource) => resource.id\n})\n\nexport const resourcesSlice = createSlice({\n    name: 'resources',\n    initialState: resourceAdapter.getInitialState({\n        status: 'fulfilled',\n        error: null\n    }),\n    reducers: {\n        addResource: resourceAdapter.addOne,\n        updateResource: resourceAdapter.upsertOne,\n        setResources: resourceAdapter.setAll,\n        addResources: resourceAdapter.addMany\n    },\n    extraReducers: {\n        [uploadResource.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [uploadResource.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            resourceAdapter.addOne(state, action.payload)\n        },\n        [uploadResource.rejected]: (state, action) => {\n            state.status = 'rejected'\n\n            state.error = action.payload\n        },\n        [updateResource.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [updateResource.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            resourceAdapter.upsertOne(state, action.payload)\n        },\n        [updateResource.rejected]: (state, action) => {\n            state.status = 'rejected'\n\n            state.error = action.payload\n        },\n        [fetchResource.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [fetchResource.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            resourceAdapter.addOne(state, action.payload)\n            \n        },\n        [fetchResource.rejected]: (state, action) => {\n            state.status = 'rejected'\n\n            state.error = action.payload\n        },\n        [fetchCapsuleResources.pending]: (state) => {\n            state.status = 'pending'\n        },\n        [fetchCapsuleResources.fulfilled]: (state, action) => {\n            state.status = 'fulfilled'\n            resourceAdapter.addMany(state, action.payload)\n            \n        },\n        [fetchCapsuleResources.rejected]: (state, action) => {\n            state.status = 'rejected'\n\n            state.error = action.payload\n        },\n    }\n})\n\nexport const selectResources = (state) => state.resources.entities\nexport const selectResourcesIds = (state) => state.resources.ids\nexport const selectResourcesStatus = (state) => state.resources.status\nexport const selectResourcesError = (state) => state.resources.error\n\n\nexport const {addResource, addResources, setResource, setResources} = resourcesSlice.actions\n\nexport default resourcesSlice.reducer;","import { useEffect, useState, Children } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { useParams, useHistory, useLocation, useRouteMatch } from \"react-router\"\nimport classname from 'classnames'\n\nimport { lockCapsule, selectCapsules, selectCapsulesIds, selectCapsulesStatus } from \"../store/capsulesSlice\"\nimport { fetchCapsuleResources, fetchResource, fetchResources, selectResources, selectResourcesIds, selectResourcesStatus, updateResource, uploadResource } from \"../store/resourcesSlice\"\nimport { selectMembers, selectMembersIds, selectMembersStatus, fetchCapsuleMembers, updateMemberState, updateMemberStatus } from \"../store/membersSlice\"\nimport { selectProfile } from \"../store/profileSlice\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faAngleDown, faAngleRight, faAngleUp, faCheck, faCheckDouble, faChevronLeft, faChevronRight, faCommentDots, faExclamation, faFile, faLock, faTimes } from \"@fortawesome/free-solid-svg-icons\"\n\n\nfunction Loading(){\n    return (\n        <div className=\"flex justify-center items-center absolute w-full h-full bg-secondary z-40\">\n            <p className=\"text-primary\">Loading...</p>\n        </div>\n    )\n}\n\nfunction  ImageModal({images, image, toggleModal}){\n    const [currentImage, setCurrentImage] = useState(image)\n\n    function handleChangeImage(amount){\n        if ( 0 <= currentImage + amount && currentImage + amount < images.length ){\n            setCurrentImage(currentImage + amount)\n        } \n\n    }\n\n    return (\n        <div className=\"fixed inset-0 z-10 flex justify-center items-center bg-primary bg-opacity-70\">\n            {/* The Modal */}\n            <div className=\"text-secondary bg-primary w-128 h-11/12 rounded-2xl p-6 flex flex-col shadow-xl border-seondary border-2 m-4\">\n                <div className=\"flex flex-grow items-center justify-center h-11/12\">\n                    <img src={images[currentImage]} className=\"object-contain\"/>\n                </div>\n                <div className=\"flex-grow h-1/12 flex justify-center items-center space-x-1\">\n                    <button \n                        className={classname(\"bg-secondary text-primary h-full w-full rounded-l-2xl\", {\"opacity-50 cursor-not-allowed\": currentImage === 0})}\n                        onClick={() => handleChangeImage(-1)}\n                    >\n                        <div className=\"h-full w-full flex items-center justify-center space-x-2 text-primary\">\n                            <FontAwesomeIcon icon={faChevronLeft} />\n                        </div>\n                    </button>\n                    <button className=\"bg-secondary text-primary h-full w-full \" onClick={toggleModal}>\n                        <div className=\"h-full w-full flex items-center justify-center space-x-2 text-primary\">\n                            <FontAwesomeIcon icon={faTimes} />\n                        </div>\n                    </button>\n                    <button \n                        className={classname(\"bg-secondary text-primary h-full w-full rounded-r-2xl\", {\"opacity-50 cursor-not-allowed\": currentImage === images.length - 1})}\n                        onClick={() => handleChangeImage(1)}\n                    >\n                        <div className=\"h-full w-full flex items-center justify-center space-x-1 text-primary\">\n                            <FontAwesomeIcon icon={faChevronRight} />\n                        </div>\n                    </button>\n                </div>\n                \n            </div>\n        </div>\n    )\n}\n\n\nfunction Accordion(props){\n    const [collapse, setCollapse] = useState(false)\n\n    return (\n        <div className=\"flex flex-col items-center justify-center w-full h-full space-y-3\">\n            <div className=\"w-full flex items-center justify-start\">\n                <div \n                    className=\"text-primary font-bold text-lg md:font-extrabold md:text-xl outline-none cursor-pointer select-none\"\n                    onClick={() => setCollapse(!collapse)}\n                >\n                    <div className=\"h-full w-full flex items-center justify-center space-x-2\">\n                        <FontAwesomeIcon icon={collapse ? faAngleRight : faAngleUp} />\n                        <p>\n                            {props.name}\n                        </p>\n                    </div>\n                </div>\n            </div>\n            <div className=\"w-full h-full\">\n                {collapse === false && props.children}\n            </div>\n        </div>\n    )\n\n}\n\nfunction Requests({requestingMembers, handleRequestAction, loading}){\n    return (\n\n        <div className=\"relative flex flex-col items-center justify-center w-full space-y-3\">\n            {/* {loading && <Loading />} */}\n            {requestingMembers.map((member) => (\n                <div className=\"h-20 w-full flex items-center justify-center bg-primary rounded-2xl p-4 space-x-2\" key={member.id}>\n                    {/* Profile pic */}\n                    <div className=\"flex items-center justify-center\">\n                        <div className=\"w-16 h-18 rounded-full overflow-hidden bg-secondary\">\n                            <img src=\"../logo.png\" className=\"object-contain\"/>\n                        </div>\n                    </div>\n                    {/* Name */}\n                    <div className=\"flex items-center justify-start flex-grow\">\n                        <p className=\"md:text-xl font-bold text-sm md:font-extrabold text-secondary\">\n                            {member.userName}\n                        </p>\n                    </div>\n                    {/* Button */}\n                    <div className=\"flex items-center justify-center space-x-1\">\n                        <button className=\"w-10 h-10 bg-secondary text-primary rounded-l-2xl\" onClick={() => handleRequestAction(member.id, true)}>\n                            <div className=\"h-full w-full flex items-center justify-center space-x-1 text-primary\">\n                                <FontAwesomeIcon icon={faCheck} />\n                            </div>\n                        </button>\n                        <button className=\"w-10 h-10 bg-secondary text-primary rounded-r-2xl\" onClick={() => handleRequestAction(member.id, false)}>\n                            <div className=\"h-full w-full flex items-center justify-center space-x-1 text-primary\">\n                                <FontAwesomeIcon icon={faTimes} />\n                            </div>\n                        </button>\n                    </div>\n                </div>\n            ))}\n\n        </div>\n    )\n}\n\nexport function OtherMembers(props){\n    const [toggleContent, setToggleContent] = useState([]) // List for each member\n\n    function MemberHeader(props){\n        const [toggle, setToggle] = useState(true)\n        return(\n            <div className=\"w-full h-full\">\n\n                <div \n                    className={classname(\"flex-grow flex space-x-2 justify-center cursor-pointer select-none w-full\", {\"border-primary border-b-2\": toggle})}\n                    onClick={() => setToggle(!toggle)}\n                    >\n                    <div className=\"flex items-center justify-center\">\n                        <div className=\"w-16 h-18 rounded-tl-2xl overflow-hidden bg-primary\">\n                            <img src=\"../logo.png\" className=\"object-contain\"/>\n                        </div>\n                    </div>\n                    <div className=\"flex items-center justify-start flex-grow\">\n                        <p className=\"md:text-xl font-bold md:font-extrabold text-primary\">\n                            {props.member.userName}\n                        </p>\n                    </div> \n                </div>\n                <div className={classname(\"w-full h-full\", {\"p-6\": toggle})}>\n                    {toggle === true && props.children}\n                </div>\n            </div>\n        )\n    }\n\n    function MemberBody(props){\n        const [toggleModal, setToggleModal] = useState(false)\n        const [modalImage, setModalImage] = useState(false)\n        \n        return (\n            <div className=\"w-full h-full\">\n                {toggleModal === true && <ImageModal image={modalImage} images={props.resource.images} toggleModal={() => setToggleModal(!toggleModal)}/>}\n\n            <div className=\"w-full h-fullflex flex-col items-start justify-center space-y-3\">\n                {/* Message */}\n                <div className=\"flex-grow text-primary\">\n                    <div>\n                        <p className=\"text-sm md:text-xl font-semibold md:font-bold \">\n                            Message\n                        </p>\n                        <p className=\"text-sm md:text-xl italic\">\n                            {props.resource.message}\n                        </p>\n                    </div>\n                </div>\n                {/* Images */}\n                <div className=\"flex-grow text-primary\">\n                        <p className=\"text-sm md:text-xl font-semibold md:font-bold \">\n                            Images\n                        </p>\n                        <div className=\"flex items-center justify-start flex-wrap\">\n                            {props.resource.images.map(image => {return (\n                                <div \n                                    className=\"flex md:h-44 md:w-44 w-24 h-24 bg-primary m-1 p-1 rounded-xl cursor-pointer\" \n                                    key={props.resource.images.indexOf(image)}\n                                    onClick={() => { setToggleModal(true); setModalImage(props.resource.images.indexOf(image))}}    \n                                >\n                                    <img src={image} className=\"rounded-xl object-cover\"/>\n                                </div>\n                            )})}\n                        </div>\n                </div>\n            </div>\n        </div>\n        )\n    }\n\n    return (\n        <div className=\"flex flex-col space-y-2 items-center justify-center w-full\">\n            {/* Member */}\n            <div className=\"flex flex-col justify-center items-start w-full space-y-3\"\n                // onClick={}\n            >\n                {props.members.map(member => {\n                    const resource = props.resources.filter(resource => resource.memberId === parseInt(member.id))\n                    return (\n                        <div className=\"border-primary border-2 w-full h-full rounded-3xl overflow-hidden\" key={member.id}>\n                            <MemberHeader key={member.id} member={member} key={member.id}>\n                                {resource.length > 0 && <MemberBody resource={resource[0]}/>}\n                                {resource.length === 0 && <p className=\"text-sm md:text-xl font-semibold md:font-bold text-primary\">Nothing was submitted.</p>}\n                            </MemberHeader>\n                        </div>\n\n                )})}\n            </div>\n        </div>    \n    )\n}\n\nfunction LockVerificationModal(props) {\n    const [copied, setCopied] = useState(\"Copy\")\n    const history = useHistory()\n\n    function handleRedirect(){\n        // history.push(`/edit/${capsuleMember}`)\n    }\n\n    return (\n        <div className=\"fixed inset-0 z-10 flex justify-center items-center bg-primary bg-opacity-70 p-4\">\n            {/* The Modal */}\n            <div className=\"text-secondary bg-primary w-128 h-64 rounded-2xl p-6 flex flex-col shadow-xl border-seondary border-2 space-y-2\"> \n                {/* Success Message */}\n                <div className=\"flex justify-center items-center felx-grow\">    \n                {/* Add icon here */}\n                    <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-secondary text-center\">{props.header}</h1>\n                </div>\n                {/* Body */}\n                <div className=\"flex justify-center items-center flex-grow \">\n                    <p className=\"text-center font-semibold\">\n                        {props.body}\n                    </p>\n                </div>\n\n                {/* Buttons */}\n                <div className=\"h-16 flex justify-center items-center space-x-2\">\n                    {props.buttons.map(button => {\n                        return(\n                            <button \n                                className=\"bg-secondary text-primary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-full h-16 rounded-2xl \" \n                                type=\"text\"\n                                key={button}\n                                onClick={props.buttonsFunctions[button]}\n                            >\n                                {button}\n                            </button>\n                        )\n                    })}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nfunction Edit(props){\n    const [emptySubmission, setEmptySubmission] = useState(false)\n    const [message, setMessage] = useState(props.message)\n    const [renderImages, setRenderImages] = useState(props.renderImages)\n    const [uploadImages, setUploadImages] = useState([])\n    const [toggleImagesModal, setToggleImagesModal] = useState(false)\n    const [toggleVerificationModal, setToggleVerificationModal] = useState(false)\n    const [modalInitImage, setModalInitImage] = useState(0) // Index into renderImages\n    const [disableSubmit, setDisableSubmit] = useState(0)\n    const [disableReady, setDisableReady] = useState(1)\n    const [disableLock, setDisableLock] = useState(1)\n\n    useEffect(() => {\n        if (message){\n            if (message === props.message && uploadImages.length === 0){\n                setDisableSubmit(1)\n                // User must upload a resource to be Ready\n                if (props.members[props.memberId].resourceId !== undefined)\n                    setDisableReady(0)\n            }\n        }\n    }, [])\n\n    useEffect(() => {\n        if (props.members[props.memberId].status === \"R\") {\n            setDisableLock(0) \n        } else {\n            setDisableLock(1)\n        }\n    }, [props.members[props.memberId].status])\n\n    function handleImageChange(e){\n        // sets the uploadImages & renderImages\n\n        if (e.target.files){\n            // For uploading\n            setUploadImages(e.target.files)\n\n            // For previewing\n            const files = Array.from(e.target.files).map(file => URL.createObjectURL(file)) \n            setRenderImages(props.renderImages ? files.concat(props.renderImages) : files)  // Concatenate with images from the server\n    \n            // Prevent leaks\n            Array.from(e.target.files).map(file => URL.revokeObjectURL(file))\n        }\n        handleFormValidation()\n    }\n\n    function handleMessageChange(e){\n        setMessage(e.target.value)\n        handleFormValidation()\n    }\n\n    function handleFormValidation(){\n        // Updating anything will enable the submit button again.\n        if (disableSubmit){\n            setDisableSubmit(0)\n            setEmptySubmission(0)\n        }\n    }\n\n    function handleToggleImagesModal(){\n        setToggleImagesModal(!toggleImagesModal)\n    }\n\n    function handleToggleVerificationModal(){\n        setToggleVerificationModal(!toggleVerificationModal)\n    }\n\n    const history = useHistory()\n    function handleVerificationModalDashboard(){\n        history.push(\"/dashboard\")\n    }\n\n    function handleRenderImageClick(image){\n        setToggleImagesModal(true)\n        setModalInitImage(renderImages.indexOf(image))\n    }\n\n    function allReady(){\n        // For the LockVerificationModal\n        const notReady = props.capsuleMembers.filter(member => props.members[member].status === \"N\")\n        return notReady.length === 0\n    }\n\n    return (\n        <div className=\"w-full h-full\">\n            \n            {allReady() && toggleVerificationModal && <LockVerificationModal \n                    header=\"Are you sure?\"\n                    body=\"You won't be able to edit or view the Capsule until it is unlocked!\"\n                    buttons={[\"Confirm\", \"Close\"]}\n                    buttonsFunctions={{\n                        \"Close\": handleToggleVerificationModal,\n                        \"Confirm\": props.handleLock,\n                    }}\n                />}\n            {allReady() && toggleVerificationModal && props.capsule.state === 1 && <LockVerificationModal \n                    header=\"Done!\"\n                    body=\"The capsule has successfully been locked! You'll be sent an Email once it's unlocked.\"\n                    buttons={[\"Dashboard\"]}\n                    buttonsFunctions={{\n                        \"Dashboard\": handleVerificationModalDashboard,\n                    }}\n                />}\n            {!allReady() && toggleVerificationModal && <LockVerificationModal \n                header=\"Cannot lock the Capsule.\"\n                body=\"Some members are still not ready!\"\n                buttons={[\"Close\"]}\n                buttonsFunctions={{\"Close\": handleToggleVerificationModal}}\n            />}\n\n            {toggleImagesModal === true && <ImageModal images={renderImages} image={modalInitImage} toggleModal={handleToggleImagesModal}/>}\n            <div className=\"flex flex-col flex-grow justify-center items-center w-full space-y-2\">\n                {/* Message */}\n                <div className=\"w-full flex flex-grow flex-col justify-center items-center\">\n                    <div className=\"flex flex-grow justify-center items-center w-full h-1/12\">\n                        <div className=\"flex justify-center items-center w-2/6 bg-primary rounded-t-lg h-full p-2\">\n                            <div className=\"h-full w-full flex items-center justify-center space-x-1 text-secondary\">\n                                <FontAwesomeIcon icon={faCommentDots} />\n                                <p className=\"font-semibold md:font-bold md:text-xl\">Message</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div \n                        type=\"text\" \n                        className={\n                            classname(\n                                \"p-2 bg-primary text-secondary text-sm font-semibold md:font-bold md:text-lg flex-grow w-full h-11/12 rounded-2xl overflow-hidden\", \n                                {\n                                    \"outline-primary\": emptySubmission && message === props.message\n                                }\n                            )}\n                    >\n                        <textarea \n                            className=\"resize-none bg-primary text-secondary w-full h-full rounded-2xl outline-none\"\n                            onChange={handleMessageChange}\n                            value={message}\n                        ></textarea>\n\n                    </div>\n                </div>\n                {/* File upload */}\n                <div className=\"w-full flex flex-grow flex-col justify-center items-center\">\n                    {/* Title */}\n                    <div className=\"flex flex-grow justify-center items-center w-full h-1/12\">\n                        <div className=\"flex justify-center items-center w-2/6 bg-primary rounded-t-lg h-full p-2\">\n                        <div className=\"h-full w-full flex items-center justify-center space-x-1 text-secondary\">\n                                <FontAwesomeIcon icon={faFile} />\n                                <p className=\"font-semibold md:font-bold md:text-xl\">Files</p>\n                            </div>\n                        </div>\n                    </div>\n                    {/* Body */}\n                    <div \n                        type=\"text\" \n                        className={classname(\n                                \"space-y-2 flex flex-col p-2 bg-primary text-secondary text-sm font-semibold md:font-bold md:text-lg outline-none flex-grow w-full h-11/12 rounded-2xl\", \n                                {\"outline-primary\": emptySubmission && !uploadImages.length}\n                            )}\n                    >\n                        {/* Upload button */}\n                        <div className=\"flex flex-grow justify-center items-center w-full h-1/6\">\n                            <label \n                                className=\"flex items-center justify-center rounded-md bg-secondary text-primary h-10 w-48 font-bold text-2xl cursor-pointer\"\n                            >\n                                <p>\n                                    Select Files\n                                </p>\n                                <input type=\"file\" className=\"hidden\" onChange={handleImageChange} multiple/>\n                            </label>\n                        </div>\n                        <div className=\"flex flex-grow flex-wrap justify-center items-center w-full h-5/6 \">\n                            {renderImages && renderImages.map(image => {return (\n                                <div \n                                    className=\"flex md:h-44 md:w-44 w-24 h-24 bg-secondary m-1 p-1 rounded-xl cursor-pointer\" \n                                    key={renderImages.indexOf(image)}\n                                    onClick={() => handleRenderImageClick(image)}    \n                                >\n                                    <img src={image} className=\"rounded-xl object-cover\"/>\n                                </div>\n                            )})}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"flex flex-grow h-16 w-full items-center justify-center\">\n                    <div className=\"flex flex-row flex-grow justify-center items-center w-full h-full space-x-1\">\n                        <button \n                            className={\n                                classname(\n                                    \"h-10 flex-grow rounded-md bg-primary text-secondary font-bold text-lg md:text-2xl w-3/6\",\n                                    {\"opacity-50 cursor-not-allowed\": disableSubmit}\n                                )\n                            }\n                            onClick={\n                                () => {\n                                    // Detect change\n                                    if (message && uploadImages.length > 0 && !disableSubmit){\n                                        setEmptySubmission(0)\n                                        props.handleSubmit(message, uploadImages)\n                                        }\n                                    else {\n                                        setEmptySubmission(1)\n                                    }\n                                }\n                            }\n                        >\n                            <div className=\"h-full w-full flex items-center justify-center space-x-2\">\n                                <FontAwesomeIcon icon={faCheckDouble} />\n                                <p>\n                                    Submit\n                                </p>\n                            </div>\n                        </button>\n                        \n                        <button \n                            className={\n                                classname(\n                                    \"h-10 flex-grow rounded-md bg-primary text-secondary font-bold text-lg md:text-2xl w-3/6\",\n                                    {\"opacity-50 cursor-not-allowed\": disableReady}\n                                )\n                            }\n                            onClick={(e) => {!disableReady && props.handleReady(e)}}\n                        >\n                                {props.members[props.memberId] && props.members[props.memberId].status === \"R\" ?\n                                    <div className=\"h-full w-full flex items-center justify-center space-x-2\">\n                                        <FontAwesomeIcon icon={faTimes} />\n                                        <p>\n                                            Ready\n                                        </p>\n                                    </div>\n                                    :\n                                    <div className=\"h-full w-full flex items-center justify-center space-x-2\">\n                                        <FontAwesomeIcon icon={faCheck} />\n                                        <p>\n                                            Ready\n                                        </p>\n                                    </div>\n                                }\n                        </button>\n\n                        {props.isAdmin && \n                            <button \n                            className={\n                                classname(\n                                    \"h-10 flex-grow rounded-md bg-primary text-secondary font-bold text-lg md:text-2xl w-3/6\",\n                                    {\"opacity-50 cursor-not-allowed\": disableLock}\n                                )\n                            }\n                            onClick={(e) => {\n                                if (!disableLock){\n                                    setToggleVerificationModal(true)\n                                }\n                            }}\n                            >\n                                <div className=\"h-full w-full flex items-center justify-center space-x-2\">\n                                    <FontAwesomeIcon icon={faLock} />\n                                    <p>\n                                        Lock\n                                    </p>\n                                </div>\n                            </button>\n                        }\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n\n    )\n}\n\nfunction EditCapsule() {   \n    const [notFound, setNotFound] = useState(0)\n\n    const [isAdmin, setIsAdmin] = useState(false)\n\n    const [requestingMembers, setRequestingMembers] = useState([])\n\n    const dispatch = useDispatch()\n\n    const {id} = useParams()\n    \n    const capsules = useSelector(selectCapsules)\n    const capsulesIds = useSelector(selectCapsulesIds)\n    const members = useSelector(selectMembers)\n    const membersStatus = useSelector(selectMembersStatus)\n    const membersIds = useSelector(selectMembersIds)\n    const resources = useSelector(selectResources)\n    const resourcesIds = useSelector(selectResourcesIds)\n    const resourcesStatus = useSelector(selectResourcesStatus)\n    const profile = useSelector(selectProfile)\n    \n    const memberCapsule = capsulesIds.filter(capsule => capsules[capsule].members.includes(parseInt(id)))\n    const capsuleMembers = membersIds.filter(member => members[member].capsuleId === parseInt(memberCapsule[0]))\n    const capsuleResources = resourcesIds.filter(resource => resources[resource])\n\n    useEffect(() => {\n\n        // Start with not found\n        setNotFound(1)\n    }, [])\n\n    useEffect(() => {\n        // Validate the memeber in the dynamic url\n        if (membersIds.includes(parseInt(id))){\n            // Set isAdmin state\n            setIsAdmin(members[id].state === 'A')   \n            setRequestingMembers(membersIds.filter(member => members[member].capsuleId === members[id].capsuleId && members[member].state === \"W\"))\n            \n        }\n    }, [members])\n\n    useEffect(() => {\n        if (memberCapsule.length !== 0){\n            // Not found if locked\n            if (capsules[memberCapsule[0]].state === 0){\n                setNotFound(0)\n            }\n            // To make sure we're up to date\n            dispatch(fetchCapsuleMembers({capsuleKey: capsules[memberCapsule[0]].key}))\n            // Getting the resources\n            dispatch(fetchCapsuleResources({capsuleKey:capsules[memberCapsule[0]].key})) \n        } \n    }, [memberCapsule[0]])\n\n    const memberResource = resourcesIds.filter(resource => resources[resource].memberId === parseInt(id))\n    \n    function handleSubmit(message, uploadImages){\n        // POST request when no existing resource\n        const resourceExists = !(memberResource.length === 0)\n        if (!resourceExists){\n            dispatch(uploadResource({memberId:id, message: message, images:uploadImages}))\n        } else {\n            dispatch(updateResource({memberId:id, message: message, images:uploadImages}))\n        }\n    }\n\n    function handleRequestAction(requestingMemberId, isApproved){\n        dispatch(updateMemberState({memberId: requestingMemberId, state: isApproved ? \"M\" : \"B\"}))\n    }\n\n    function handleReady(){\n        const newStatus = members[id].status === \"R\" ? \"N\" : \"R\" \n        dispatch(updateMemberStatus({memberId: id, status: newStatus}))\n    }\n\n    function handleLock(){\n        dispatch(lockCapsule({capsuleKey: capsules[memberCapsule[0]].key}))\n    }\n\n    if (notFound === 1){\n        return (\n            <div className=\"flex flex-col h-64 items-center justify-center rounded-b-2xl bg-secondary\">\n                <div className=\"flex items-center justify-center\">\n                    <p className=\"flex-grow font-bold text-primary\">\n                        Not found.\n                    </p>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"bg-secondary relative overflow-hidden rounded-b-2xl\">\n            {/* Dummy Flex */}\n            {membersIds.length > 0\n                && membersIds.includes(parseInt(id)) \n                && memberCapsule.length > 0 && \n            \n            <div className=\"flex flex-col justify-center items-center p-4 space-y-3\">\n                <div className=\"flex justify-center items-center felx-grow w-full\">    \n                    <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-primary text-center truncate\">{memberCapsule.length > 0 && capsules[memberCapsule[0]].name}</h1>\n                </div>\n                {/* {resourcesStatus === 'pending' && <Loading />} */}\n\n                <Edit \n                    handleSubmit={handleSubmit}\n                    handleReady={handleReady}\n                    handleLock={handleLock}\n                    members={members}\n                    capsuleMembers={capsuleMembers}\n                    capsule={capsules[memberCapsule[0]]}\n                    memberId={id}\n                    isAdmin={isAdmin}\n                    renderImages={memberResource.length > 0 ? resources[memberResource[0]].images : null}\n                    message={memberResource.length > 0 ? resources[memberResource[0]].message : null}\n                    key={memberResource}     // Re-render the Component everytime memberResource gets updated\n                />\n                {isAdmin && membersIds.length > 0\n                && membersIds.includes(parseInt(id)) &&\n                    <Accordion name=\"Requests\">\n                        {/* Requests */}\n                        <Requests \n                            requestingMembers={requestingMembers.map(member => members[member])} \n                            handleRequestAction={handleRequestAction} \n                            loading={membersStatus === 'pending'}\n                        />\n                        {requestingMembers.length === 0 &&\n                        <div className=\"h-full w-full flex items-center justify-center space-x-2 text-lg text-primary\">\n                            <p className=\"font-bold\">\n                                None\n                            </p>\n                            <FontAwesomeIcon icon={faExclamation} />\n                        </div>\n                        }\n                    </Accordion>\n                }\n                {/* Other Members */}\n                {membersIds.length > 0\n                && membersIds.includes(parseInt(id)) && \n                <Accordion name=\"Other Members\">\n                    {capsuleMembers.length > 0 && capsuleResources.length > 0 && <OtherMembers members={capsuleMembers.map(member => members[member]).filter(member => member.userId !== profile.id)} resources={capsuleResources.map(resource => resources[resource])}/>}\n                \n                    {capsuleResources.length <= 1 && capsuleMembers.length <= 1 && \n                    <div className=\"h-full w-full flex items-center justify-center space-x-2 text-lg text-primary\">\n                        <p className=\"font-bold\">\n                            None\n                        </p>\n                        <FontAwesomeIcon icon={faExclamation} />\n                    </div>\n                    }\n                </Accordion>\n                }\n            </div>\n            }\n        </div>\n    )\n}\n\nexport default EditCapsule\n","import { useEffect, useState } from \"react\"\nimport classname from 'classnames'\nimport { joinCapsule, selectMembersError, selectMembersStatus, setMember } from \"../store/membersSlice\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { useHistory } from \"react-router\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { faArrowLeft, faCheck, faRedo } from \"@fortawesome/free-solid-svg-icons\"\n\nfunction Join({handleJoin}){\n    const [key, setKey] = useState(\"\")\n    const [emptySubmission, setEmptySubmission] = useState(0)\n\n    return (\n        <div className=\"flex w-full justify-center items-center h-16\">\n            <input \n                className={classname(\"outline-none p-2 text-primary text-sm font-bold md:text-bold md:text-xl flex flex-grow justify-center items-center rounded-l-2xl h-full w-9/12 border-primary border-2 rounder-l-2xl overflow-hidden bg-secondary\", {\"outline-primary\": emptySubmission && !key})}\n                onChange={(e) => {setKey(e.target.value)}}\n            />\n\n            <button \n                className=\"bg-primary text-secondary text-sm font-bold md:text-bold md:text-xl outline-none flex-grow w-3/12 h-full rounded-r-2xl\" \n                onClick={() => {\n                    if (!key){\n                        setEmptySubmission(1)\n                    }\n                    else {\n                        handleJoin(key)\n                        setEmptySubmission(0)\n                    }\n                }}\n            >Join</button>\n        </div>\n    )\n}\n\nfunction Feedback({message, buttonMessage, buttonIcon, handleFeedbackOnClick}){\n    return (\n        <div className=\"flex flex-col w-full justify-center items-center flex-grow\">\n            <div className=\"flex flex-grow items-center justify-center\">\n                <p  className=\"text-primary text-md font-bold md:text-xl text-center\">{message}</p>\n            </div>\n            <div className=\"flex flex-grow items-end justify-start w-3/6\">\n                <button \n                    className=\"bg-primary text-secondary text-md font-bold md:text-xl outline-none flex-grow w-full h-16 rounded-2xl\" \n                    onClick={handleFeedbackOnClick}\n                >\n                    <div className=\"h-full w-full flex items-center justify-center space-x-3\">\n                        <FontAwesomeIcon icon={buttonIcon} />\n                        <p>{buttonMessage}</p>\n                    </div>\n                    \n                </button>\n            </div>\n        </div>\n    )\n}\n\nfunction JoinCapsule() {\n    const [toggleFeedback, setToggleFeedback] = useState(0)\n    const [feedbackData, setFeedbackData] = useState(null)\n    const [statusUpdated, setStatusUpdated] = useState(0) // Gets set when memberStatus is pending. Quick fix for not having an `idle` status\n\n    const dispatch = useDispatch()\n\n    const history = useHistory()\n\n    const membersStatus = useSelector(selectMembersStatus)\n    const membersError = useSelector(selectMembersError)\n\n    function handleFeedbackOnClick(){\n        if (membersStatus === 'rejected'){\n            // Retry\n\n            setToggleFeedback(0)\n            setFeedbackData(null)\n        } else if (membersStatus === 'fulfilled'){\n            // Redirect to dashboard\n            history.push(\"/dashboard\")\n        }\n    }\n\n    function handleJoin(key){\n        dispatch(joinCapsule({capsuleKey: key}))\n    }\n\n    useEffect(() => {\n        if (membersStatus === 'pending'){\n            setStatusUpdated(1)\n        }\n        if (statusUpdated){\n            if (membersStatus === 'fulfilled'){\n                setFeedbackData({\n                    message: \"Request has been sent!\",\n                    buttonMessage: \"Dashboard\",\n                    buttonIcon: faArrowLeft\n                })\n                setToggleFeedback(1)\n            } else if (membersStatus === 'rejected' && membersError){\n                // if (parseInt(membersError.status) === 404){\n                setFeedbackData({\n                    message: \"Capsule is not found.\",\n                    buttonMessage: \"Retry\",\n                    buttonIcon: faRedo\n                })\n                setToggleFeedback(1)\n                // }\n            }\n        }\n        \n    }, [membersStatus])\n\n    return (\n        <div className=\"w-full bg-secondary flex flex-col space-y-2 justify-center items-center p-4 rounded-b-2xl\">\n            <div className=\"flex justify-center items-center felx-grow\">    \n                <h1 className=\"text-2xl font-bold md:text-3xl md:font-extrabold text-primary\">Join a Time Capsule</h1>\n            </div>\n            {toggleFeedback === 0 && <Join handleJoin={handleJoin}/>}\n            {toggleFeedback === 1 && <Feedback message={feedbackData.message} buttonMessage={feedbackData.buttonMessage} buttonIcon={feedbackData.buttonIcon} handleFeedbackOnClick={handleFeedbackOnClick}/>}\n        </div>\n    )\n}\n\nexport default JoinCapsule\n","// This should be deleted after a cleanup :)\n\nimport { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useParams } from 'react-router'\nimport { selectCapsules, selectCapsulesIds, selectCapsulesStatus } from '../store/capsulesSlice'\nimport { fetchCapsuleMembers, selectMembers, selectMembersIds, selectMembersStatus } from '../store/membersSlice'\nimport { selectProfile } from '../store/profileSlice'\nimport { fetchCapsuleResources, selectResources, selectResourcesIds, selectResourcesStatus } from '../store/resourcesSlice'\nimport {OtherMembers} from './EditCapsule'\n\nfunction ViewCapsule() {\n    const {key} = useParams()\n\n    const members = useSelector(selectMembers)\n    const membersIds = useSelector(selectMembersIds)\n    const membersStatus = useSelector(selectMembersStatus)\n    \n    const resources = useSelector(selectResources)\n    const resourcesIds = useSelector(selectResourcesIds) \n    const resourcesState = useSelector(selectResourcesStatus) \n\n    const capsules = useSelector(selectCapsules)\n    const capsulesIds = useSelector(selectCapsulesIds)\n    const capsulesStatus = useSelector(selectCapsulesStatus)\n\n    const profile = useSelector(selectProfile)\n\n    const memberCapsule = capsulesIds.filter(capsule => capsules[capsule].key === key)\n    const capsuleMembers = membersIds.filter(member => members[member].capsuleId === parseInt(memberCapsule[0]))\n    const capsuleResources = resourcesIds.filter(resource => resources[resource])\n\n    const dispatch = useDispatch()\n\n    useEffect(() => {\n        if (memberCapsule.length !== 0){\n            // To make sure we're up to date\n            dispatch(fetchCapsuleMembers({capsuleKey: capsules[memberCapsule[0]].key}))\n            // Getting the resources\n            dispatch(fetchCapsuleResources({capsuleKey:capsules[memberCapsule[0]].key})) \n        } \n    }, [memberCapsule[0]])\n\n    return (\n        <div className=\"bg-secondary h-full w-full flex items-center justify-center rounded-b-2xl p-6\">\n            {capsuleMembers.length > 0 && capsuleResources.length > 0 && <OtherMembers members={capsuleMembers.map(member => members[member])} resources={capsuleResources.map(resource => resources[resource])}/>}\n            \n            {!(capsuleMembers.length > 0 && capsuleResources.length > 0) && \n            <div className=\"flex flex-col h-64 items-center justify-center rounded-b-2xl bg-secondary\">\n                <div className=\"flex items-center justify-center\">\n                    <p className=\"flex-grow font-bold text-primary\">\n                        Not found.\n                    </p>\n                </div>\n            </div>\n            }\n        </div>\n    )\n}\n\nexport default ViewCapsule\n","import './App.css';\nimport {BrowserRouter as Router, Route, Switch, Redirect} from \"react-router-dom\"\nimport {React, useEffect} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport LandingPage from './components/LandingPage';\nimport Navbar from './components/Navbar'\nimport AuthPage from './components/AuthPage';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport {authenticate, selectUser, setToken, selectAuthStatus, loadToken} from './store/authSlice';\nimport Dashboard from './components/DashboardPage';\nimport Logout from './components/Logout';\nimport Create from './components/Create';\nimport EditCapsule from './components/EditCapsule';\nimport { fetchProfile } from './store/profileSlice';\nimport { fetchCapsules, selectCapsules, selectCapsulesIds, selectCapsulesStatus } from './store/capsulesSlice'\nimport JoinCapsule from './components/JoinCapsule';\nimport ViewCapsule from './components/ViewCapsule';\nimport { faPlusCircle, faSignInAlt, faSignOutAlt, faUserPlus } from '@fortawesome/free-solid-svg-icons';\n\nfunction App() {\n\n  const routes = {\n    LandingPage: \"/home\",\n    AuthPage: \"/auth\",\n    Dashboard: \"/dashboard\",\n    Create: \"/create\",\n    Edit: \"/edit\",\n    View: \"/view\",\n    Join: \"/join\",\n    Logout: \"/logout\",\n  }\n\n  const dispatch = useDispatch()\n\n  const user = useSelector(selectUser)\n  const authStatus = useSelector(selectAuthStatus)\n\n  useEffect(() => {   \n    if (!user.access_token){\n      dispatch(loadToken())\n    } else {\n      // Access token has to be available\n      dispatch(fetchProfile())\n    }\n  }, [user.access_token])\n\n  const capsules = useSelector(selectCapsules)\n  const capsulesIds = useSelector(selectCapsulesIds)\n  const capsulesStatus = useSelector(selectCapsulesStatus)\n\n  useEffect(() => {\n    // Fetching capsules is global right now...\n\n    if (!capsulesIds.length && user.access_token){\n        if (capsulesStatus !== \"pending\"){\n            dispatch(fetchCapsules())\n        }\n    } \n  }, [capsules, user.access_token])\n  \n  // Waiting for token to be fetched\n  // Without this we'll be constantly redirected in ProtectedRoute\n  // This shall be the MainLoader\n  if (authStatus === 'pending'){\n    return (\n      <div className=\"font-mono min-h-screen flex items-center justify-center bg-primary text-secondary\">\n        <p>\n          Loading...\n        </p>\n      </div>\n    )\n  }\n\n  return (\n    <Router>\n      <div className=\"bg-primary min-h-screen p-6 font-mono\">\n        {/* skeleton */}\n        <div className=\"md:w-5/6 m-auto\">\n          {/* navbar */}\n          <div className=\"h-16 md:h-20 bg-red-100\">\n            <Navbar\n              items={\n                [\n                  {\n                    image: \"/logo.png\",\n                    title: \"Time Capsulator\",\n                    link: routes.LandingPage,\n                    authState: 0  // 0 for unauth only, 1 for auth, 2 for both\n                  },\n\n                  {\n                    image: \"/logo.png\",\n                    title: \"Dashboard\",\n                    link: routes.Dashboard,\n                    authState: 1\n                  },\n\n                  {\n                    icon: faSignInAlt,\n                    title: \"Login\",\n                    link: routes.AuthPage,\n                    authState: 0\n                  },\n\n                  {\n                    icon: faPlusCircle,\n                    title: \"Create\",\n                    link: routes.Create,\n                    authState: 1,\n                  },\n                  {\n                    icon: faUserPlus,\n                    title: \"Join\",\n                    link: routes.Join,\n                    authState: 1\n                  },\n                  {\n                    icon: faSignOutAlt,\n                    title: \"Logout\",\n                    link: routes.Logout,\n                    authState: 1\n                  },\n\n                  \n                ]\n              }\n            ></Navbar>\n          </div>\n          {/* body */}\n          <div className=\"rounded-b-2xl h-full\">\n            {/* Routing */}\n              <Switch>\n                <Route path={`${routes.AuthPage}`} component={AuthPage} />\n                <ProtectedRoute exact={true} path={`${routes.LandingPage}`} component={LandingPage} redirection={`${routes.Dashboard}`} authRequired={false}  />\n                <ProtectedRoute path={`${routes.Dashboard}`} component={Dashboard} redirection={`${routes.AuthPage}`}/>\n                <ProtectedRoute path={`${routes.Logout}`} component={Logout} redirection={`${routes.AuthPage}`}/>\n                <ProtectedRoute path={`${routes.Create}`} component={Create} redirection={`${routes.AuthPage}`}/>\n                <ProtectedRoute path={`${routes.Edit}/:id`} component={EditCapsule} redirection={`${routes.AuthPage}`}/>\n                <ProtectedRoute path={`${routes.View}/:key`} component={ViewCapsule} redirection={`${routes.AuthPage}`}/>\n                <ProtectedRoute path={`${routes.Join}`} component={JoinCapsule} redirection={`${routes.AuthPage}`}/>\n                <Redirect to={`${routes.LandingPage}`} />\n              </Switch>\n          </div>\n        </div>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {configureStore} from '@reduxjs/toolkit'\nimport authReducer from './authSlice'\nimport capsulesReducer from './capsulesSlice'\nimport profileReducer from './profileSlice'\nimport membersReducer from './membersSlice'\nimport resourcesReducer from './resourcesSlice'\n\nexport const store = configureStore({\n    reducer: {\n        capsules: capsulesReducer,\n        auth: authReducer,\n        profile: profileReducer,\n        members: membersReducer,\n        resources: resourcesReducer,\n\n    }\n})","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport {Provider} from 'react-redux'\nimport {store} from \"./store/config\"\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}